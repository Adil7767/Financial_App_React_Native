{"version":3,"sources":["useInterval.tsx"],"names":["React","defaultOptions","cancelOnUnmount","useInterval","fn","milliseconds","options","opts","timeout","useRef","callback","isCleared","setIsCleared","useState","clear","useCallback","current","clearInterval","useEffect","setInterval"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AAEA,MAAMC,cAAc,GAAG;AACnBC,EAAAA,eAAe,EAAE;AADE,CAAvB;AAIA;AACA;AACA;AACA;;AACA,MAAMC,WAAW,GAAG,CAACC,EAAD,EAAKC,YAAL,EAAmBC,OAAO,GAAGL,cAA7B,KAAgD;AAChE,QAAMM,IAAI,GAAG,EAAE,GAAGN,cAAL;AAAqB,QAAIK,OAAO,IAAI,EAAf;AAArB,GAAb;AACA,QAAME,OAAO,GAAGR,KAAK,CAACS,MAAN,EAAhB;AACA,QAAMC,QAAQ,GAAGV,KAAK,CAACS,MAAN,CAAaL,EAAb,CAAjB;AACA,QAAM,CAACO,SAAD,EAAYC,YAAZ,IAA4BZ,KAAK,CAACa,QAAN,CAAe,KAAf,CAAlC,CAJgE,CAMhE;;AACA,QAAMC,KAAK,GAAGd,KAAK,CAACe,WAAN,CAAkB,MAAM;AAClC,QAAIP,OAAO,CAACQ,OAAZ,EAAqB;AACjBJ,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACAK,MAAAA,aAAa,CAACT,OAAO,CAACQ,OAAT,CAAb;AACH;AACJ,GALa,EAKX,EALW,CAAd,CAPgE,CAchE;;AACAhB,EAAAA,KAAK,CAACkB,SAAN,CAAgB,MAAM;AAClB,QAAI,OAAOd,EAAP,KAAc,UAAlB,EAA8B;AAC1BM,MAAAA,QAAQ,CAACM,OAAT,GAAmBZ,EAAnB;AACH;AACJ,GAJD,EAIG,CAACA,EAAD,CAJH,EAfgE,CAqBhE;;AACAJ,EAAAA,KAAK,CAACkB,SAAN,CAAgB,MAAM;AAClB,QAAI,OAAOb,YAAP,KAAwB,QAA5B,EAAsC;AAClCG,MAAAA,OAAO,CAACQ,OAAR,GAAkBG,WAAW,CAAC,MAAM;AAChCT,QAAAA,QAAQ,CAACM,OAAT;AACH,OAF4B,EAE1BX,YAF0B,CAA7B;AAGH,KALiB,CAOlB;;;AACA,WAAOS,KAAP;AACH,GATD,EASG,CAACT,YAAD,CATH,EAtBgE,CAiChE;;AACAL,EAAAA,KAAK,CAACkB,SAAN,CAAgB,MAAM,MAAM;AACxB,QAAIX,IAAI,CAACL,eAAT,EAA0B;AACtBY,MAAAA,KAAK;AACR;AACJ,GAJD,EAIG,EAJH;AAMA,SAAO,CAACH,SAAD,EAAYG,KAAZ,CAAP;AACH,CAzCD;;AA2CA,eAAeX,WAAf","sourcesContent":["import * as React from \"react\";\n\nconst defaultOptions = {\n    cancelOnUnmount: true,\n};\n\n/**\n * An async-utility hook that accepts a callback function and a delay time (in milliseconds), then repeats the\n * execution of the given function by the defined milliseconds.\n */\nconst useInterval = (fn, milliseconds, options = defaultOptions) => {\n    const opts = { ...defaultOptions, ...(options || {}) };\n    const timeout = React.useRef<any>();\n    const callback = React.useRef(fn);\n    const [isCleared, setIsCleared] = React.useState(false);\n\n    // the clear method\n    const clear = React.useCallback(() => {\n        if (timeout.current) {\n            setIsCleared(true);\n            clearInterval(timeout.current);\n        }\n    }, []);\n\n    // if the provided function changes, change its reference\n    React.useEffect(() => {\n        if (typeof fn === \"function\") {\n            callback.current = fn;\n        }\n    }, [fn]);\n\n    // when the milliseconds change, reset the timeout\n    React.useEffect(() => {\n        if (typeof milliseconds === \"number\") {\n            timeout.current = setInterval(() => {\n                callback.current();\n            }, milliseconds);\n        }\n\n        // cleanup previous interval\n        return clear;\n    }, [milliseconds]);\n\n    // when component unmount clear the timeout\n    React.useEffect(() => () => {\n        if (opts.cancelOnUnmount) {\n            clear();\n        }\n    }, []);\n\n    return [isCleared, clear];\n};\n\nexport default useInterval;"]}