{"version":3,"sources":["Picker.tsx"],"names":["SelectPickerContainer","styled","div","SelectPickerMask","SelectPickerIndicator","SelectPickerContent","SelectPickerContentItem","Picker","React","Component","constructor","props","scrollY","lastY","startY","scrollDisabled","isMoving","setTransform","nodeStyle","value","transform","webkitTransform","setTransition","transition","webkitTransition","scrollTo","_x","y","time","noAnimate","contentRef","style","setTimeout","scrollingComplete","Velocity","minInterval","maxInterval","_time","_y","_velocity","recorder","record","now","Date","getVelocity","onFinish","targetY","height","children","length","itemHeight","velocity","Math","abs","round","onScrollChange","onStart","onMove","touchstart","evt","touches","pageY","mousedown","touchmove","preventDefault","mousemove","touchend","touchcancel","mouseup","getValue","setDisabled","disabled","top","scrollHanders","selectedValue","state","setState","onValueChange","Children","toArray","index","computeChildIndex","scrollValue","child","console","warn","doScrollingComplete","fireValueChange","selectedValueState","defaultSelectedValue","undefined","componentDidMount","indicatorRef","maskRef","rootRef","rootHeight","getBoundingClientRect","num","floor","padding","backgroundSize","select","passiveSupported","willPreventDefault","passive","willNotPreventDefault","Object","keys","forEach","key","indexOf","pd","addEventListener","componentWillUnmount","removeEventListener","options","defineProperty","get","window","err","UNSAFE_componentWillReceiveProps","nextProps","scrollToWithoutAnimation","shouldComponentUpdate","nextState","componentDidUpdate","render","prefixCls","itemStyle","indicatorStyle","itemClassName","selectedItemClassName","map","item","className","items","concat","el"],"mappings":"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","sourcesContent":["import * as React from \"react\";\n// import classNames from 'classnames';\nimport { IPickerProps } from \"./PickerTypes\";\nimport PickerMixin from \"./PickerMixin\";\nimport styled from \"styled-components\";\n\nconst SelectPickerContainer = styled.div`\n    height: 238px;\n\n    display: block;\n    position: relative;\n    overflow: hidden;\n    width: 100%;\n    flex: 1;\n    text-align: center;\n`;\n\nconst SelectPickerMask = styled.div`\n    position: absolute;\n    left: 0;\n    top: 0;\n    height: 100%;\n    margin: 0 auto;\n    width: 100%;\n    z-index: 3;\n    background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.6)), linear-gradient(to top, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.6));\n    background-position: top, bottom;\n    background-size: 100% 204px;\n    background-repeat: no-repeat;\n`;\n\nconst SelectPickerIndicator = styled.div`\n    box-sizing: border-box;\n    width: 100%;\n    height: 34px;\n    position: absolute;\n    left: 0;\n    top: 102px;\n    z-index: 3;\n    border-top: 1PX solid #ddd;\n    border-bottom: 1PX solid #ddd;\n`;\n\nconst SelectPickerContent = styled.div`\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    z-index: 1;\n`;\n\nexport const SelectPickerContentItem = styled.div`\n    font-size: 16px;\n    height: 34px;\n    line-height: 34px;\n    padding: 0 10px;\n    white-space: nowrap;\n    position: relative;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    color: #9b9b9b;\n    width: 100%;\n    box-sizing: border-box;\n`;\n\nexport interface IPickerProp {\n    select: (...arg) => void;\n    doScrollingComplete: (...arg) => void;\n    computeChildIndex: (...arg) => number;\n}\n\nexport type Props = IPickerProp & IPickerProps;\n\nclass Picker extends React.Component<IPickerProp & IPickerProps, any> {\n    static defaultProps = {\n        prefixCls: \"rmc-picker\",\n    };\n\n    rootRef: any;\n    maskRef: any;\n    contentRef: any;\n    indicatorRef: any;\n    itemHeight: number;\n    scrollValue: any;\n\n    scrollHanders = (() => {\n        let scrollY = -1;\n        let lastY = 0;\n        let startY = 0;\n        let scrollDisabled = false;\n        let isMoving = false;\n\n        const setTransform = (nodeStyle: CSSStyleDeclaration, value: any) => {\n            nodeStyle.transform = value;\n            nodeStyle.webkitTransform = value;\n        };\n\n        const setTransition = (nodeStyle: CSSStyleDeclaration, value: any) => {\n            nodeStyle.transition = value;\n            nodeStyle.webkitTransition = value;\n        };\n\n        const scrollTo = (_x, y, time = .3) => {\n            if (scrollY !== y) {\n                scrollY = y;\n                if (time && !this.props.noAnimate) {\n                    setTransition(this.contentRef.style, `cubic-bezier(0,0,0.2,1.15) ${time}s`);\n                }\n                setTransform(this.contentRef.style, `translate3d(0,${-y}px,0)`);\n                setTimeout(() => {\n                    this.scrollingComplete();\n                    if (this.contentRef) {\n                        setTransition(this.contentRef.style, \"\");\n                    }\n                }, +time * 1000);\n            }\n        };\n\n        const Velocity = ((minInterval = 30, maxInterval = 100) => {\n            let _time = 0;\n            let _y = 0;\n            let _velocity = 0;\n            const recorder = {\n                record: (y) => {\n                    const now = +new Date();\n                    _velocity = (y - _y) / (now - _time);\n                    if (now - _time >= minInterval) {\n                        _velocity = now - _time <= maxInterval ? _velocity : 0;\n                        _y = y;\n                        _time = now;\n                    }\n                },\n                getVelocity: (y) => {\n                    if (y !== _y) {\n                        recorder.record(y);\n                    }\n                    return _velocity;\n                },\n            };\n            return recorder;\n        })();\n\n        const onFinish = () => {\n            isMoving = false;\n            let targetY = scrollY;\n\n            const height = ((this.props.children as any).length - 1) * this.itemHeight;\n\n            let time = .3;\n\n            const velocity = Velocity.getVelocity(targetY) * 4;\n            if (velocity) {\n                targetY = velocity * 40 + targetY;\n                time = Math.abs(velocity) * .1;\n            }\n\n            if (targetY % this.itemHeight !== 0) {\n                targetY = Math.round(targetY / this.itemHeight) * this.itemHeight;\n            }\n\n            if (targetY < 0) {\n                targetY = 0;\n            } else if (targetY > height) {\n                targetY = height;\n            }\n\n            scrollTo(0, targetY, time < .3 ? .3 : time);\n            this.onScrollChange();\n        };\n\n        const onStart = (y: number) => {\n            if (scrollDisabled) {\n                return;\n            }\n\n            isMoving = true;\n            startY = y;\n            lastY = scrollY;\n        };\n\n        const onMove = (y: number) => {\n            if (scrollDisabled || !isMoving) {\n                return;\n            }\n\n            scrollY = lastY - y + startY;\n            Velocity.record(scrollY);\n\n            this.onScrollChange();\n            setTransform(this.contentRef.style, `translate3d(0,${-scrollY}px,0)`);\n        };\n\n        return {\n            touchstart: (evt: React.TouchEvent<HTMLDivElement>) => onStart(evt.touches[0].pageY),\n            mousedown: (evt: React.MouseEvent<HTMLDivElement>) => onStart(evt.pageY),\n            touchmove: (evt: React.TouchEvent<HTMLDivElement>) => {\n                evt.preventDefault();\n                onMove(evt.touches[0].pageY);\n            },\n            mousemove: (evt: React.MouseEvent<HTMLDivElement>) => {\n                evt.preventDefault();\n                onMove(evt.pageY);\n            },\n            touchend: () => onFinish(),\n            touchcancel: () => onFinish(),\n            mouseup: () => onFinish(),\n            getValue: () => {\n                return scrollY;\n            },\n            scrollTo,\n            setDisabled: (disabled = false) => {\n                scrollDisabled = disabled;\n            },\n        };\n    })();\n\n    constructor(props) {\n        super(props);\n\n        let selectedValueState;\n        const { selectedValue, defaultSelectedValue } = this.props;\n        if (selectedValue !== undefined) {\n            selectedValueState = selectedValue;\n        } else if (defaultSelectedValue !== undefined) {\n            selectedValueState = defaultSelectedValue;\n        } else {\n            const children: any = React.Children.toArray(this.props.children);\n            selectedValueState = children && children[0] && children[0].props.value;\n        }\n        this.state = {\n            selectedValue: selectedValueState,\n        };\n    }\n\n    componentDidMount() {\n        const { contentRef, indicatorRef, maskRef, rootRef } = this;\n        const rootHeight = rootRef.getBoundingClientRect().height;\n        // https://github.com/react-component/m-picker/issues/18\n        const itemHeight = this.itemHeight = indicatorRef.getBoundingClientRect().height;\n        let num = Math.floor(rootHeight / itemHeight);\n        if (num % 2 === 0) {\n            num--;\n        }\n        num--;\n        num /= 2;\n        contentRef.style.padding = `${itemHeight * num}px 0`;\n        indicatorRef.style.top = `${itemHeight * num}px`;\n        maskRef.style.backgroundSize = `100% ${itemHeight * num}px`;\n        this.scrollHanders.setDisabled(this.props.disabled);\n        this.props.select(this.state.selectedValue, this.itemHeight, this.scrollTo);\n\n        const passiveSupported = this.passiveSupported();\n        const willPreventDefault = passiveSupported ? { passive: false } : false;\n        const willNotPreventDefault = passiveSupported ? { passive: true } : false;\n        Object.keys(this.scrollHanders).forEach(key => {\n            if (key.indexOf(\"touch\") === 0 || key.indexOf(\"mouse\") === 0) {\n                const pd = key.indexOf(\"move\") >= 0 ? willPreventDefault : willNotPreventDefault;\n                (rootRef as HTMLDivElement).addEventListener(key, this.scrollHanders[key], pd as any);\n            }\n        });\n    }\n\n    componentWillUnmount() {\n        Object.keys(this.scrollHanders).forEach(key => {\n            if (key.indexOf(\"touch\") === 0 || key.indexOf(\"mouse\") === 0) {\n                (this.rootRef as HTMLDivElement).removeEventListener(key, this.scrollHanders[key]);\n            }\n        });\n    }\n\n    passiveSupported() {\n        let passiveSupported = false;\n\n        try {\n            const options = Object.defineProperty({}, \"passive\", {\n                get: () => {\n                    passiveSupported = true;\n                },\n            });\n            window.addEventListener(\"test\", null as any, options);\n        } catch (err) {\n            // do something\n        }\n        return passiveSupported;\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps: IPickerProp & IPickerProps) {\n        if (\"selectedValue\" in nextProps) {\n            if (this.state.selectedValue !== nextProps.selectedValue) {\n                this.setState({\n                    selectedValue: nextProps.selectedValue,\n                }, () => {\n                    this.props.select(\n                        nextProps.selectedValue,\n                        this.itemHeight,\n                        nextProps.noAnimate ? this.scrollToWithoutAnimation : this.scrollTo,\n                    );\n                });\n            }\n        }\n        this.scrollHanders.setDisabled(nextProps.disabled);\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        return this.state.selectedValue !== nextState.selectedValue\n            || this.props.children !== nextProps.children;\n    }\n\n    componentDidUpdate() {\n        this.props.select(this.state.selectedValue, this.itemHeight, this.scrollToWithoutAnimation);\n    }\n\n    scrollTo = (top) => {\n        this.scrollHanders.scrollTo(0, top);\n    }\n\n    scrollToWithoutAnimation = (top) => {\n        this.scrollHanders.scrollTo(0, top, 0);\n    }\n\n    fireValueChange = (selectedValue) => {\n        if (selectedValue !== this.state.selectedValue) {\n            if (!(\"selectedValue\" in this.props)) {\n                this.setState({\n                    selectedValue,\n                });\n            }\n            if (this.props.onValueChange) {\n                this.props.onValueChange(selectedValue);\n            }\n        }\n    }\n\n    onScrollChange = () => {\n        const top = this.scrollHanders.getValue();\n        if (top >= 0) {\n            const children = React.Children.toArray(this.props.children);\n            const index = this.props.computeChildIndex(top, this.itemHeight, children.length);\n            if (this.scrollValue !== index) {\n                this.scrollValue = index;\n                const child: any = children[index];\n                if (child && this.props.onScrollChange) {\n                    this.props.onScrollChange(child.props.value);\n                } else if (!child && console.warn) {\n                    console.warn(\"child not found\", children, index);\n                }\n            }\n        }\n    }\n\n    scrollingComplete = () => {\n        const top = this.scrollHanders.getValue();\n        if (top >= 0) {\n            this.props.doScrollingComplete(top, this.itemHeight, this.fireValueChange);\n        }\n    }\n\n    getValue() {\n        if (\"selectedValue\" in this.props) {\n            return this.props.selectedValue;\n        }\n        const children: any = React.Children.toArray(this.props.children);\n        return children && children[0] && children[0].props.value;\n    }\n\n    render() {\n        const { props } = this;\n        const {\n            prefixCls,\n            itemStyle,\n            indicatorStyle,\n            // indicatorClassName = \"\",\n            children,\n        } = props;\n        const { selectedValue } = this.state;\n        const itemClassName = `${prefixCls}-item`;\n        const selectedItemClassName = `${itemClassName} ${prefixCls}-item-selected`;\n        const map = (item: any) => {\n            const { className = \"\", style, value } = item.props;\n            return (\n                <SelectPickerContentItem\n                    style={{ ...itemStyle, ...style }}\n                    className={`${selectedValue === value ? selectedItemClassName : itemClassName} ${className}`}\n                    key={value}\n                >\n                    {item.children || item.props.children}\n                </SelectPickerContentItem>\n            );\n        };\n        // compatibility for preact\n        const items = React.Children ? React.Children.map(children, map) : ([] as any[]).concat(children).map(map);\n\n        // const pickerCls = {\n        //     [props.className as string]: !!props.className,\n        //     [prefixCls as string]: true,\n        // };\n        return (\n            <SelectPickerContainer\n                // className={classNames(pickerCls)}\n                ref={el => this.rootRef = el}\n                style={this.props.style}\n                data-testid=\"selectpicker_container\"\n            >\n                <SelectPickerMask className={`${prefixCls}-mask`} ref={el => this.maskRef = el} />\n                <SelectPickerIndicator\n                    // className={`${prefixCls}-indicator ${indicatorClassName}`}\n                    ref={el => this.indicatorRef = el}\n                    style={indicatorStyle}\n                />\n                <SelectPickerContent\n                    // className={`${prefixCls}-content`}\n                    ref={el => this.contentRef = el}\n                >\n                    {items}\n                </SelectPickerContent>\n            </SelectPickerContainer>\n        );\n    }\n}\n\nexport default PickerMixin(Picker);\n"]}