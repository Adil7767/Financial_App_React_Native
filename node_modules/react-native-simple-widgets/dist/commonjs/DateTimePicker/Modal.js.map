{"version":3,"sources":["Modal.tsx"],"names":["MODAL_ANIM_DURATION","MODAL_BACKDROP_OPACITY","Modal","React","Component","isVisible","props","deviceWidth","Dimensions","get","width","deviceHeight","height","Animated","Value","dimensionsUpdate","window","state","setState","timing","animVal","easing","Easing","inOut","quad","useNativeDriver","duration","toValue","start","_isMounted","onHide","componentDidMount","show","DeviceEventEmitter","addListener","handleDimensionsUpdate","componentWillUnmount","removeListener","componentDidUpdate","prevProps","hide","render","children","onBackdropPress","contentStyle","otherProps","backdropAnimatedStyle","opacity","interpolate","inputRange","outputRange","contentAnimatedStyle","transform","translateY","extrapolate","styles","backdrop","content","StyleSheet","create","container","position","top","left","right","bottom","backgroundColor","flex","justifyContent"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport {\n    Animated,\n    DeviceEventEmitter,\n    Dimensions,\n    Easing,\n    Modal as ReactNativeModal,\n    StyleSheet,\n    TouchableWithoutFeedback,\n} from \"react-native\";\n\nconst MODAL_ANIM_DURATION = 300;\nconst MODAL_BACKDROP_OPACITY = 0.4;\n\ntype Props = {\n    onBackdropPress?: () => void,\n    onHide?: () => void,\n    isVisible?: boolean,\n    contentStyle?: Record<string, any>,\n};\n\nexport class Modal extends React.Component<Props> {\n\n    static defaultProps = {\n        onBackdropPress: () => null,\n        onHide: () => null,\n        isVisible: false,\n    };\n\n    state = {\n        isVisible: this.props.isVisible,\n        deviceWidth: Dimensions.get(\"window\").width,\n        deviceHeight: Dimensions.get(\"window\").height,\n    };\n\n    animVal = new Animated.Value(0);\n    _isMounted = false;\n\n    componentDidMount() {\n        this._isMounted = true;\n        if (this.state.isVisible) {\n            this.show();\n        }\n        DeviceEventEmitter.addListener(\n            \"didUpdateDimensions\",\n            this.handleDimensionsUpdate\n        );\n    }\n\n    componentWillUnmount() {\n        DeviceEventEmitter.removeListener(\n            \"didUpdateDimensions\",\n            this.handleDimensionsUpdate\n        );\n        this._isMounted = false;\n    }\n\n    componentDidUpdate(prevProps: Props) {\n        if (this.props.isVisible && !prevProps.isVisible) {\n            this.show();\n        } else if (!this.props.isVisible && prevProps.isVisible) {\n            this.hide();\n        }\n    }\n\n    handleDimensionsUpdate = (dimensionsUpdate) => {\n        const deviceWidth = dimensionsUpdate.window.width;\n        const deviceHeight = dimensionsUpdate.window.height;\n        if (\n            deviceWidth !== this.state.deviceWidth ||\n            deviceHeight !== this.state.deviceHeight\n        ) {\n            this.setState({ deviceWidth, deviceHeight });\n        }\n    };\n\n    show = () => {\n        this.setState({ isVisible: true });\n        Animated.timing(this.animVal, {\n            easing: Easing.inOut(Easing.quad),\n            // Using native driver in the modal makes the content flash\n            useNativeDriver: false,\n            duration: MODAL_ANIM_DURATION,\n            toValue: 1,\n        }).start();\n    };\n\n    hide = () => {\n        Animated.timing(this.animVal, {\n            easing: Easing.inOut(Easing.quad),\n            // Using native driver in the modal makes the content flash\n            useNativeDriver: false,\n            duration: MODAL_ANIM_DURATION,\n            toValue: 0,\n        }).start(() => {\n            if (this._isMounted) {\n                this.setState({ isVisible: false }, this.props.onHide);\n            }\n        });\n    };\n\n    render() {\n        const {\n            children,\n            onBackdropPress,\n            contentStyle,\n            ...otherProps\n        } = this.props;\n        const { deviceHeight, deviceWidth, isVisible } = this.state;\n        const backdropAnimatedStyle = {\n            opacity: this.animVal.interpolate({\n                inputRange: [0, 1],\n                outputRange: [0, MODAL_BACKDROP_OPACITY],\n            }),\n        };\n        const contentAnimatedStyle = {\n            transform: [\n                {\n                    translateY: this.animVal.interpolate({\n                        inputRange: [0, 1],\n                        outputRange: [deviceHeight, 0],\n                        extrapolate: \"clamp\",\n                    }),\n                },\n            ],\n        };\n        return (\n            <ReactNativeModal\n                transparent\n                animationType=\"none\"\n                visible={isVisible}\n                {...otherProps}\n            >\n                <TouchableWithoutFeedback onPress={onBackdropPress}>\n                    <Animated.View\n                        style={[\n                            styles.backdrop,\n                            backdropAnimatedStyle,\n                            { width: deviceWidth, height: deviceHeight },\n                        ]}\n                    />\n                </TouchableWithoutFeedback>\n                {isVisible && (\n                    <Animated.View\n                        style={[styles.content, contentAnimatedStyle, contentStyle]}\n                        pointerEvents=\"box-none\"\n                    >\n                        {children}\n                    </Animated.View>\n                )}\n            </ReactNativeModal>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n    },\n    backdrop: {\n        position: \"absolute\",\n        top: 0,\n        bottom: 0,\n        left: 0,\n        right: 0,\n        backgroundColor: \"black\",\n        opacity: 0,\n    },\n    content: {\n        flex: 1,\n        justifyContent: \"flex-end\",\n    },\n});\n\nexport default Modal;"]}