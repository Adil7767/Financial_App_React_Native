{"version":3,"sources":["Carousel.tsx"],"names":["IS_IOS","Platform","OS","AnimatedFlatList","FlatList","Animated","createAnimatedComponent","AnimatedScrollView","ScrollView","IS_RTL","I18nManager","isRTL","Carousel","React","PureComponent","constructor","props","hideCarousel","interpolators","enableMomentum","itemWidth","itemHeight","loopClonesPerSide","sliderWidth","sliderHeight","vertical","visibleItems","Math","ceil","initialNumPerSide","_enableLoop","initialNumToRender","maxToRenderPerBatch","windowSize","specificProps","_needsScrollView","decelerationRate","showsHorizontalScrollIndicator","showsVerticalScrollIndicator","overScrollMode","automaticallyAdjustContentInsets","directionalLockEnabled","pinchGestureEnabled","scrollsToTop","removeClippedSubviews","inverted","_needsRTLAdaptations","initialActiveItem","_getFirstItem","firstItem","_activeItem","_previousActiveItem","_previousFirstItem","_previousItemsLength","_mounted","_positions","_currentContentOffset","_canFireBeforeCallback","_canFireCallback","_scrollOffsetRef","_onScrollTriggered","_lastScrollDate","_scrollEnabled","scrollEnabled","_ignoreNextMomentum","_initPositionsAndInterpolators","bind","_renderItem","_onSnap","_onLayout","_onScroll","_onScrollBeginDrag","enableSnap","undefined","_onScrollEnd","autoplay","_onScrollEndDrag","_onMomentumScrollEnd","_onTouchStart","_onTouchEnd","_onTouchRelease","_getKeyExtractor","_setScrollHandler","ViewPropTypes","console","warn","error","apparitionDelay","useScrollView","customAnimationType","customAnimationOptions","onScrollViewScroll","componentDidMount","_firstItem","apparitionCallback","setState","startAutoplay","requestAnimationFrame","_snapToItem","_hackActiveSlideAnimation","_apparitionTimeout","setTimeout","componentDidUpdate","prevProps","state","itemsLength","_getCustomDataLength","nextFirstItem","nextActiveItem","hasNewSliderWidth","hasNewSliderHeight","hasNewItemWidth","hasNewItemHeight","hasNewScrollEnabled","_setScrollEnabled","length","onScroll","componentWillUnmount","stopAutoplay","clearTimeout","_hackSlideAnimationTimeout","_enableAutoplayTimeout","_autoplayTimeout","_snapNoMomentumTimeout","_edgeItemTimeout","_lockScrollTimeout","realIndex","currentIndex","_getDataIndex","currentScrollPosition","scrollEventConfig","listener","useNativeDriver","_scrollPos","Value","argMapping","nativeEvent","contentOffset","y","x","Array","isArray","_argMapping","pop","argMap","push","_onScrollHandler","event","_shouldUseStackLayout","_shouldUseTinderLayout","_canLockScroll","lockScrollWhileSnapping","data","loop","_shouldAnimateSlides","inactiveSlideOpacity","inactiveSlideScale","scrollInterpolator","slideInterpolatedStyle","_shouldUseShiftLayout","_shouldUseCustomAnimation","activeAnimationOptions","inactiveSlideShift","layout","_getCustomData","dataLength","previousItems","nextItems","dataMultiplier","floor","remainder","i","unshift","slice","concat","_getCustomIndex","index","baseDataIndexes","dataIndexes","j","_getPositionIndex","_getWrappedRef","_carouselRef","scrollTo","scrollToOffset","getNode","_getScrollEnabled","wrappedRef","setNativeProps","item","_getScrollOffset","_getContainerInnerMargin","opposite","activeSlideAlignment","_getViewportOffset","_getCenter","offset","_getActiveItem","activeSlideOffset","swipeThreshold","center","centerOffset","start","end","lastIndex","sizeRef","forEach","itemData","_index","animatedValue","interpolator","inputRange","outputRange","interpolate","extrapolate","_getSlideAnimation","toValue","activeAnimationType","animationCommonOptions","isInteraction","parallel","easing","Easing","linear","_playCustomSlideAnimation","current","next","_currentIndex","_currentDataIndex","_nextIndex","_nextDataIndex","animations","stopTogether","goTo","force","direction","_scrollTo","_lockScroll","lockScrollTimeoutDuration","_releaseScroll","_repositionScroll","repositionTo","animated","specificOptions","options","callbackOffsetMargin","scrollOffset","itemReached","_itemToSnapTo","scrollConditions","Date","now","_onBeforeSnap","_onStartShouldSetResponderCapture","onStartShouldSetResponderCapture","onTouchStart","_autoplaying","pauseAutoPlay","onTouchEnd","_autoplay","onScrollBeginDrag","_scrollStartOffset","_scrollStartActive","onScrollEndDrag","onMomentumScrollEnd","autoplayDelay","_scrollEndOffset","_scrollEndActive","_snapScroll","onLayout","_onLayoutInitDone","delta","fireCallback","initial","lockScroll","onSnapToItem","onBeforeSnapToItem","autoplayInterval","_autoplayInterval","setInterval","snapToNext","clearInterval","snapToItem","positionIndex","newIndex","snapToPrev","triggerRenderingHack","scrollPosition","_getSlideInterpolatedStyle","layoutCardOffset","hasParallaxImages","keyExtractor","renderItem","slideStyle","animate","Component","View","animatedStyle","parallaxProps","carouselRef","mainDimension","height","width","key","_getComponentStaticProps","containerCustomStyle","contentContainerCustomStyle","style","containerStyle","opacity","flexDirection","contentContainerStyle","paddingTop","paddingBottom","paddingLeft","paddingRight","numColumns","ref","c","horizontal","scrollEventThrottle","onResponderRelease","render","_getComponentOverridableProps","ScrollViewComponent","map"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport {\n    Animated,\n    Easing,\n    FlatList,\n    I18nManager,\n    Platform,\n    ScrollView,\n    StyleProp,\n    View,\n    ViewPropTypes,\n    ViewStyle,\n} from \"react-native\";\nimport {\n    defaultScrollInterpolator,\n    stackScrollInterpolator,\n    tinderScrollInterpolator,\n    defaultAnimatedStyles,\n    shiftAnimatedStyles,\n    stackAnimatedStyles,\n    tinderAnimatedStyles,\n} from \"../utils/animations\";\n\nconst IS_IOS = Platform.OS === \"ios\";\n\n// Native driver for scroll events\n// See: https://facebook.github.io/react-native/blog/2017/02/14/using-native-driver-for-animated.html\nconst AnimatedFlatList = FlatList\n    ? Animated.createAnimatedComponent(FlatList)\n    : null;\nconst AnimatedScrollView = Animated.createAnimatedComponent(ScrollView);\n\n// React Native automatically handles RTL layouts; unfortunately, it's buggy with horizontal ScrollView\n// See https://github.com/facebook/react-native/issues/11960\n// NOTE: the following variable is not declared in the constructor\n// otherwise it is undefined at init, which messes with custom indexes\nconst IS_RTL = I18nManager.isRTL;\n\ntype Props = {\n    data: any[],\n    renderItem: (data, props) => React.ReactNode,\n    itemWidth?: number, // required for horizontal carousel\n    itemHeight?: number, // required for vertical carousel\n    sliderWidth?: number, // required for horizontal carousel\n    sliderHeight?: number, // required for vertical carousel\n    activeAnimationType?: string,\n    activeAnimationOptions?: Record<string, unknown>,\n    activeSlideAlignment?: \"center\" | \"end\" | \"start\",\n    activeSlideOffset?: number,\n    apparitionDelay?: number,\n    autoplay?: boolean,\n    autoplayDelay?: number,\n    autoplayInterval?: number,\n    callbackOffsetMargin?: number,\n    containerCustomStyle?: StyleProp<ViewStyle>,\n    contentContainerCustomStyle?: StyleProp<ViewStyle>,\n    enableMomentum?: boolean,\n    enableSnap?: boolean,\n    firstItem?: number,\n    hasParallaxImages?: boolean,\n    inactiveSlideOpacity?: number,\n    inactiveSlideScale?: number,\n    inactiveSlideShift?: number,\n    layout?: \"default\" | \"stack\" | \"tinder\",\n    layoutCardOffset?: number,\n    lockScrollTimeoutDuration?: number,\n    lockScrollWhileSnapping?: boolean,\n    loop?: boolean,\n    loopClonesPerSide?: number,\n    scrollEnabled?: boolean,\n    scrollInterpolator?: (index, props) => void,\n    slideInterpolatedStyle?: (index, animatedValue, props) => void,\n    slideStyle?: StyleProp<ViewStyle>,\n    swipeThreshold?: number,\n    useScrollView?: boolean | (() => void),\n    vertical?: boolean,\n    onBeforeSnapToItem?: (index) => void,\n    onSnapToItem?: (index?) => void,\n    onScroll?: (evt) => void,\n    keyExtractor?: string | (() => void),\n    onTouchStart?: (evt?) => void,\n    onTouchEnd?: (evt?) => void,\n    onScrollBeginDrag?: (evt) => void,\n    onScrollEndDrag?: (evt) => void,\n    style?: Record<string, unknown>,\n    customAnimationType?: string,\n    customAnimationOptions?: Record<string, unknown>,\n    onScrollViewScroll?: (evt) => void,\n    onStartShouldSetResponderCapture?: (evt) => void,\n    onMomentumScrollEnd?: (evt?) => void,\n    onLayout?: (evt?) => void,\n};\n\ntype State = {\n    hideCarousel: boolean,\n    interpolators: any[],\n}\n\nexport default class Carousel extends React.PureComponent<Props, State> {\n\n    static defaultProps = {\n        activeAnimationType: \"timing\",\n        activeAnimationOptions: null,\n        activeSlideAlignment: \"center\",\n        activeSlideOffset: 20,\n        apparitionDelay: 0,\n        autoplay: false,\n        autoplayDelay: 1000,\n        autoplayInterval: 3000,\n        callbackOffsetMargin: 5,\n        containerCustomStyle: {},\n        contentContainerCustomStyle: {},\n        enableMomentum: false,\n        enableSnap: true,\n        firstItem: 0,\n        hasParallaxImages: false,\n        inactiveSlideOpacity: 0.7,\n        inactiveSlideScale: 0.9,\n        inactiveSlideShift: 0,\n        layout: \"default\",\n        lockScrollTimeoutDuration: 1000,\n        lockScrollWhileSnapping: false,\n        loop: false,\n        loopClonesPerSide: 3,\n        scrollEnabled: true,\n        slideStyle: {},\n        swipeThreshold: 20,\n        useScrollView: !AnimatedFlatList,\n        vertical: false,\n    };\n\n    state: State = {\n        hideCarousel: true,\n        interpolators: [],\n    };\n\n    _activeItem: number;\n    _previousActiveItem: number;\n    _previousFirstItem: number;\n    _previousItemsLength: number;\n\n    _mounted: boolean;\n    _positions: any[];\n    _currentContentOffset: number; // store ScrollView's scroll position\n    _canFireBeforeCallback: boolean;\n    _canFireCallback: boolean;\n    _scrollOffsetRef = null;\n    _onScrollTriggered = true; // used when momentum is enabled to prevent an issue with edges items\n    _lastScrollDate: number; // used to work around a FlatList bug\n    _scrollEnabled: boolean;\n\n    // This bool aims at fixing an iOS bug due to scrollTo that triggers onMomentumScrollEnd.\n    // onMomentumScrollEnd fires this._snapScroll, thus creating an infinite loop.\n    _ignoreNextMomentum: boolean;\n\n    _carouselRef;\n\n    _scrollPos: Animated.Value;\n\n    _onScrollHandler;\n\n    _apparitionTimeout;\n    _hackSlideAnimationTimeout;\n    _enableAutoplayTimeout;\n    _autoplayTimeout;\n    _snapNoMomentumTimeout;\n    _edgeItemTimeout;\n    _lockScrollTimeout;\n\n    _autoplayInterval;\n\n    _itemToSnapTo: number;\n\n    _autoplay: boolean;\n    _autoplaying: boolean;\n\n    _scrollStartOffset: number;\n    _scrollStartActive: number;\n    _scrollEndOffset: number;\n    _scrollEndActive: number;\n\n    _onLayoutInitDone: boolean;\n\n    constructor(props) {\n        super(props);\n\n        // The following values are not stored in the state because 'setState()' is asynchronous\n        // and this results in an absolutely crappy behavior on Android while swiping (see #156)\n        const initialActiveItem = this._getFirstItem(props.firstItem);\n        this._activeItem = initialActiveItem;\n        this._previousActiveItem = initialActiveItem;\n        this._previousFirstItem = initialActiveItem;\n        this._previousItemsLength = initialActiveItem;\n\n        this._mounted = false;\n        this._positions = [];\n        this._currentContentOffset = 0; // store ScrollView's scroll position\n        this._canFireBeforeCallback = false;\n        this._canFireCallback = false;\n        this._scrollOffsetRef = null;\n        this._onScrollTriggered = true; // used when momentum is enabled to prevent an issue with edges items\n        this._lastScrollDate = 0; // used to work around a FlatList bug\n        this._scrollEnabled = props.scrollEnabled !== false;\n\n        // This bool aims at fixing an iOS bug due to scrollTo that triggers onMomentumScrollEnd.\n        // onMomentumScrollEnd fires this._snapScroll, thus creating an infinite loop.\n        this._ignoreNextMomentum = false;\n\n        this._initPositionsAndInterpolators = this._initPositionsAndInterpolators.bind(\n            this\n        );\n        this._renderItem = this._renderItem.bind(this);\n        this._onSnap = this._onSnap.bind(this);\n\n        this._onLayout = this._onLayout.bind(this);\n        this._onScroll = this._onScroll.bind(this);\n        this._onScrollBeginDrag = props.enableSnap\n            ? this._onScrollBeginDrag.bind(this)\n            : undefined;\n        this._onScrollEnd =\n            props.enableSnap || props.autoplay\n                ? this._onScrollEnd.bind(this)\n                : undefined;\n        this._onScrollEndDrag = !props.enableMomentum\n            ? this._onScrollEndDrag.bind(this)\n            : undefined;\n        this._onMomentumScrollEnd = props.enableMomentum\n            ? this._onMomentumScrollEnd.bind(this)\n            : undefined;\n        this._onTouchStart = this._onTouchStart.bind(this);\n        this._onTouchEnd = this._onTouchEnd.bind(this);\n        this._onTouchRelease = this._onTouchRelease.bind(this);\n\n        this._getKeyExtractor = this._getKeyExtractor.bind(this);\n\n        this._setScrollHandler(props);\n\n        // Warnings\n        if (!ViewPropTypes) {\n            console.warn(\n                \"react-native-snap-carousel: It is recommended to use at least version 0.44 of React Native with the plugin\"\n            );\n        }\n        if (!props.vertical && (!props.sliderWidth || !props.itemWidth)) {\n            console.error(\n                \"react-native-snap-carousel: You need to specify both `sliderWidth` and `itemWidth` for horizontal carousels\"\n            );\n        }\n        if (props.vertical && (!props.sliderHeight || !props.itemHeight)) {\n            console.error(\n                \"react-native-snap-carousel: You need to specify both `sliderHeight` and `itemHeight` for vertical carousels\"\n            );\n        }\n        if (props.apparitionDelay && !IS_IOS && !props.useScrollView) {\n            console.warn(\n                \"react-native-snap-carousel: Using `apparitionDelay` on Android is not recommended since it can lead to rendering issues\"\n            );\n        }\n        if (props.customAnimationType || props.customAnimationOptions) {\n            console.warn(\n                \"react-native-snap-carousel: Props `customAnimationType` and `customAnimationOptions` have been renamed to `activeAnimationType` and `activeAnimationOptions`\"\n            );\n        }\n        if (props.onScrollViewScroll) {\n            console.error(\n                \"react-native-snap-carousel: Prop `onScrollViewScroll` has been removed. Use `onScroll` instead\"\n            );\n        }\n    }\n\n    componentDidMount() {\n        const { apparitionDelay, autoplay, firstItem } = this.props;\n        const _firstItem = this._getFirstItem(firstItem);\n        const apparitionCallback = () => {\n            this.setState({ hideCarousel: false });\n            if (autoplay) {\n                this.startAutoplay();\n            }\n        };\n\n        this._mounted = true;\n        this._initPositionsAndInterpolators();\n\n        // Without 'requestAnimationFrame' or a `0` timeout, images will randomly not be rendered on Android...\n        requestAnimationFrame(() => {\n            if (!this._mounted) {\n                return;\n            }\n\n            this._snapToItem(_firstItem, false, false, true, false);\n            this._hackActiveSlideAnimation(_firstItem, \"start\", true);\n\n            if (apparitionDelay) {\n                this._apparitionTimeout = setTimeout(() => {\n                    apparitionCallback();\n                }, apparitionDelay);\n            } else {\n                apparitionCallback();\n            }\n        });\n    }\n\n    componentDidUpdate(prevProps) {\n        const { interpolators } = this.state;\n        const {\n            firstItem,\n            itemHeight,\n            itemWidth,\n            scrollEnabled,\n            sliderHeight,\n            sliderWidth,\n        } = this.props;\n        const itemsLength = this._getCustomDataLength(this.props);\n\n        if (!itemsLength) {\n            return;\n        }\n\n        const nextFirstItem = this._getFirstItem(firstItem, this.props);\n        let nextActiveItem =\n            this._activeItem || this._activeItem === 0\n                ? this._activeItem\n                : nextFirstItem;\n\n        const hasNewSliderWidth =\n            sliderWidth && sliderWidth !== prevProps.sliderWidth;\n        const hasNewSliderHeight =\n            sliderHeight && sliderHeight !== prevProps.sliderHeight;\n        const hasNewItemWidth = itemWidth && itemWidth !== prevProps.itemWidth;\n        const hasNewItemHeight = itemHeight && itemHeight !== prevProps.itemHeight;\n        const hasNewScrollEnabled = scrollEnabled !== prevProps.scrollEnabled;\n\n        // Prevent issues with dynamically removed items\n        if (nextActiveItem > itemsLength - 1) {\n            nextActiveItem = itemsLength - 1;\n        }\n\n        // Handle changing scrollEnabled independent of user -> carousel interaction\n        if (hasNewScrollEnabled) {\n            this._setScrollEnabled(scrollEnabled);\n        }\n\n        if (\n            interpolators.length !== itemsLength ||\n            hasNewSliderWidth ||\n            hasNewSliderHeight ||\n            hasNewItemWidth ||\n            hasNewItemHeight\n        ) {\n            this._activeItem = nextActiveItem;\n            this._previousItemsLength = itemsLength;\n\n            this._initPositionsAndInterpolators(this.props);\n\n            // Handle scroll issue when dynamically removing items (see #133)\n            // This also fixes first item's active state on Android\n            // Because 'initialScrollIndex' apparently doesn't trigger scroll\n            if (this._previousItemsLength > itemsLength) {\n                this._hackActiveSlideAnimation(nextActiveItem, null, true);\n            }\n\n            if (\n                hasNewSliderWidth ||\n                hasNewSliderHeight ||\n                hasNewItemWidth ||\n                hasNewItemHeight\n            ) {\n                this._snapToItem(nextActiveItem, false, false, false, false);\n            }\n        } else if (\n            nextFirstItem !== this._previousFirstItem &&\n            nextFirstItem !== this._activeItem\n        ) {\n            this._activeItem = nextFirstItem;\n            this._previousFirstItem = nextFirstItem;\n            this._snapToItem(nextFirstItem, false, true, false, false);\n        }\n\n        if (this.props.onScroll !== prevProps.onScroll) {\n            this._setScrollHandler(this.props);\n        }\n    }\n\n    componentWillUnmount() {\n        this._mounted = false;\n        this.stopAutoplay();\n        clearTimeout(this._apparitionTimeout);\n        clearTimeout(this._hackSlideAnimationTimeout);\n        clearTimeout(this._enableAutoplayTimeout);\n        clearTimeout(this._autoplayTimeout);\n        clearTimeout(this._snapNoMomentumTimeout);\n        clearTimeout(this._edgeItemTimeout);\n        clearTimeout(this._lockScrollTimeout);\n    }\n\n    get realIndex() {\n        return this._activeItem;\n    }\n\n    get currentIndex() {\n        return this._getDataIndex(this._activeItem);\n    }\n\n    get currentScrollPosition() {\n        return this._currentContentOffset;\n    }\n\n    _setScrollHandler(props) {\n        // Native driver for scroll events\n        const scrollEventConfig = {\n            listener: this._onScroll,\n            useNativeDriver: true,\n        };\n        this._scrollPos = new Animated.Value(0);\n        const argMapping = props.vertical\n            ? [{ nativeEvent: { contentOffset: { y: this._scrollPos } } }]\n            : [{ nativeEvent: { contentOffset: { x: this._scrollPos } } }];\n\n        if (props.onScroll && Array.isArray(props.onScroll._argMapping)) {\n            // Because of a react-native issue https://github.com/facebook/react-native/issues/13294\n            argMapping.pop();\n            const [argMap] = props.onScroll._argMapping;\n            if (argMap && argMap.nativeEvent && argMap.nativeEvent.contentOffset) {\n                // Shares the same animated value passed in props\n                this._scrollPos =\n                    argMap.nativeEvent.contentOffset.x ||\n                    argMap.nativeEvent.contentOffset.y ||\n                    this._scrollPos;\n            }\n            argMapping.push(...props.onScroll._argMapping);\n        }\n        this._onScrollHandler = Animated.event(argMapping, scrollEventConfig);\n    }\n\n    _needsScrollView() {\n        const { useScrollView } = this.props;\n        return (\n            useScrollView ||\n            !AnimatedFlatList ||\n            this._shouldUseStackLayout() ||\n            this._shouldUseTinderLayout()\n        );\n    }\n\n    _needsRTLAdaptations() {\n        const { vertical } = this.props;\n        return IS_RTL && !IS_IOS && !vertical;\n    }\n\n    _canLockScroll() {\n        const {\n            scrollEnabled,\n            enableMomentum,\n            lockScrollWhileSnapping,\n        } = this.props;\n        return scrollEnabled && !enableMomentum && lockScrollWhileSnapping;\n    }\n\n    _enableLoop() {\n        const { data, enableSnap, loop } = this.props;\n        return enableSnap && loop && data && data.length && data.length > 1;\n    }\n\n    _shouldAnimateSlides(props = this.props) {\n        const {\n            inactiveSlideOpacity,\n            inactiveSlideScale,\n            scrollInterpolator,\n            slideInterpolatedStyle,\n        } = props;\n        return (\n            inactiveSlideOpacity < 1 ||\n            inactiveSlideScale < 1 ||\n            !!scrollInterpolator ||\n            !!slideInterpolatedStyle ||\n            this._shouldUseShiftLayout() ||\n            this._shouldUseStackLayout() ||\n            this._shouldUseTinderLayout()\n        );\n    }\n\n    _shouldUseCustomAnimation() {\n        const { activeAnimationOptions } = this.props;\n        return (\n            !!activeAnimationOptions &&\n            !this._shouldUseStackLayout() &&\n            !this._shouldUseTinderLayout()\n        );\n    }\n\n    _shouldUseShiftLayout() {\n        const { inactiveSlideShift, layout } = this.props;\n        return layout === \"default\" && inactiveSlideShift !== 0;\n    }\n\n    _shouldUseStackLayout() {\n        return this.props.layout === \"stack\";\n    }\n\n    _shouldUseTinderLayout() {\n        return this.props.layout === \"tinder\";\n    }\n\n    _getCustomData(props = this.props) {\n        const { data, loopClonesPerSide } = props;\n        const dataLength = data && data.length;\n\n        if (!dataLength) {\n            return [];\n        }\n\n        if (!this._enableLoop()) {\n            return data;\n        }\n\n        let previousItems = [];\n        let nextItems = [];\n\n        if (loopClonesPerSide > dataLength) {\n            const dataMultiplier = Math.floor(loopClonesPerSide / dataLength);\n            const remainder = loopClonesPerSide % dataLength;\n\n            for (let i = 0; i < dataMultiplier; i++) {\n                previousItems.push(...data);\n                nextItems.push(...data);\n            }\n\n            previousItems.unshift(...data.slice(-remainder));\n            nextItems.push(...data.slice(0, remainder));\n        } else {\n            previousItems = data.slice(-loopClonesPerSide);\n            nextItems = data.slice(0, loopClonesPerSide);\n        }\n\n        return previousItems.concat(data, nextItems);\n    }\n\n    _getCustomDataLength(props = this.props) {\n        const { data, loopClonesPerSide } = props;\n        const dataLength = data && data.length;\n\n        if (!dataLength) {\n            return 0;\n        }\n\n        return this._enableLoop() ? dataLength + 2 * loopClonesPerSide : dataLength;\n    }\n\n    _getCustomIndex(index, props = this.props) {\n        const itemsLength = this._getCustomDataLength(props);\n\n        if (!itemsLength || (!index && index !== 0)) {\n            return 0;\n        }\n\n        return this._needsRTLAdaptations() ? itemsLength - index - 1 : index;\n    }\n\n    _getDataIndex(index) {\n        const { data, loopClonesPerSide } = this.props;\n        const dataLength = data && data.length;\n\n        if (!this._enableLoop() || !dataLength) {\n            return index;\n        }\n\n        if (index >= dataLength + loopClonesPerSide) {\n            return loopClonesPerSide > dataLength\n                ? (index - loopClonesPerSide) % dataLength\n                : index - dataLength - loopClonesPerSide;\n        } else if (index < loopClonesPerSide) {\n            // TODO: is there a simpler way of determining the interpolated index?\n            if (loopClonesPerSide > dataLength) {\n                const baseDataIndexes = [];\n                const dataIndexes = [];\n                const dataMultiplier = Math.floor(loopClonesPerSide / dataLength);\n                const remainder = loopClonesPerSide % dataLength;\n\n                for (let i = 0; i < dataLength; i++) {\n                    baseDataIndexes.push(i);\n                }\n\n                for (let j = 0; j < dataMultiplier; j++) {\n                    dataIndexes.push(...baseDataIndexes);\n                }\n\n                dataIndexes.unshift(...baseDataIndexes.slice(-remainder));\n                return dataIndexes[index];\n            } else {\n                return index + dataLength - loopClonesPerSide;\n            }\n        } else {\n            return index - loopClonesPerSide;\n        }\n    }\n\n    // Used with `snapToItem()` and 'PaginationDot'\n    _getPositionIndex(index) {\n        const { loop, loopClonesPerSide } = this.props;\n        return loop ? index + loopClonesPerSide : index;\n    }\n\n    _getFirstItem(index, props = this.props) {\n        const { loopClonesPerSide } = props;\n        const itemsLength = this._getCustomDataLength(props);\n\n        if (!itemsLength || index > itemsLength - 1 || index < 0) {\n            return 0;\n        }\n\n        return this._enableLoop() ? index + loopClonesPerSide : index;\n    }\n\n    _getWrappedRef() {\n        if (\n            this._carouselRef &&\n            ((this._needsScrollView() && this._carouselRef.scrollTo) ||\n                (!this._needsScrollView() && this._carouselRef.scrollToOffset))\n        ) {\n            return this._carouselRef;\n        }\n        // https://github.com/facebook/react-native/issues/10635\n        // https://stackoverflow.com/a/48786374/8412141\n        return (\n            this._carouselRef &&\n            this._carouselRef.getNode &&\n            this._carouselRef.getNode()\n        );\n    }\n\n    _getScrollEnabled() {\n        return this._scrollEnabled;\n    }\n\n    _setScrollEnabled(scrollEnabled = true) {\n        const wrappedRef = this._getWrappedRef();\n\n        if (!wrappedRef || !wrappedRef.setNativeProps) {\n            return;\n        }\n\n        // 'setNativeProps()' is used instead of 'setState()' because the latter\n        // really takes a toll on Android behavior when momentum is disabled\n        wrappedRef.setNativeProps({ scrollEnabled });\n        this._scrollEnabled = scrollEnabled;\n    }\n\n    _getKeyExtractor(item, index) {\n        return this._needsScrollView()\n            ? `scrollview-item-${index}`\n            : `flatlist-item-${index}`;\n    }\n\n    _getScrollOffset(event) {\n        const { vertical } = this.props;\n        return (\n            (event &&\n                event.nativeEvent &&\n                event.nativeEvent.contentOffset &&\n                event.nativeEvent.contentOffset[vertical ? \"y\" : \"x\"]) ||\n            0\n        );\n    }\n\n    _getContainerInnerMargin(opposite = false) {\n        const {\n            sliderWidth,\n            sliderHeight,\n            itemWidth,\n            itemHeight,\n            vertical,\n            activeSlideAlignment,\n        } = this.props;\n\n        if (\n            (activeSlideAlignment === \"start\" && !opposite) ||\n            (activeSlideAlignment === \"end\" && opposite)\n        ) {\n            return 0;\n        } else if (\n            (activeSlideAlignment === \"end\" && !opposite) ||\n            (activeSlideAlignment === \"start\" && opposite)\n        ) {\n            return vertical ? sliderHeight - itemHeight : sliderWidth - itemWidth;\n        } else {\n            return vertical\n                ? (sliderHeight - itemHeight) / 2\n                : (sliderWidth - itemWidth) / 2;\n        }\n    }\n\n    _getViewportOffset() {\n        const {\n            sliderWidth,\n            sliderHeight,\n            itemWidth,\n            itemHeight,\n            vertical,\n            activeSlideAlignment,\n        } = this.props;\n\n        if (activeSlideAlignment === \"start\") {\n            return vertical ? itemHeight / 2 : itemWidth / 2;\n        } else if (activeSlideAlignment === \"end\") {\n            return vertical\n                ? sliderHeight - itemHeight / 2\n                : sliderWidth - itemWidth / 2;\n        } else {\n            return vertical ? sliderHeight / 2 : sliderWidth / 2;\n        }\n    }\n\n    _getCenter(offset) {\n        return offset + this._getViewportOffset() - this._getContainerInnerMargin();\n    }\n\n    _getActiveItem(offset) {\n        const { activeSlideOffset, swipeThreshold } = this.props;\n        const center = this._getCenter(offset);\n        const centerOffset = activeSlideOffset || swipeThreshold;\n\n        for (let i = 0; i < this._positions.length; i++) {\n            const { start, end } = this._positions[i];\n            if (center + centerOffset >= start && center - centerOffset <= end) {\n                return i;\n            }\n        }\n\n        const lastIndex = this._positions.length - 1;\n        if (\n            this._positions[lastIndex] &&\n            center - centerOffset > this._positions[lastIndex].end\n        ) {\n            return lastIndex;\n        }\n\n        return 0;\n    }\n\n    _initPositionsAndInterpolators(props = this.props) {\n        const { data, itemWidth, itemHeight, scrollInterpolator, vertical } = props;\n        const sizeRef = vertical ? itemHeight : itemWidth;\n\n        if (!data || !data.length) {\n            return;\n        }\n\n        const interpolators = [];\n        this._positions = [];\n\n        this._getCustomData(props).forEach((itemData, index) => {\n            const _index = this._getCustomIndex(index, props);\n            let animatedValue;\n\n            this._positions[index] = {\n                start: index * sizeRef,\n                end: index * sizeRef + sizeRef,\n            };\n\n            if (!this._shouldAnimateSlides(props)) {\n                animatedValue = new Animated.Value(1);\n            } else if (this._shouldUseCustomAnimation()) {\n                animatedValue = new Animated.Value(_index === this._activeItem ? 1 : 0);\n            } else {\n                let interpolator;\n\n                if (scrollInterpolator) {\n                    interpolator = scrollInterpolator(_index, props);\n                } else if (this._shouldUseStackLayout()) {\n                    interpolator = stackScrollInterpolator(_index, props);\n                } else if (this._shouldUseTinderLayout()) {\n                    interpolator = tinderScrollInterpolator(_index, props);\n                }\n\n                if (\n                    !interpolator ||\n                    !interpolator.inputRange ||\n                    !interpolator.outputRange\n                ) {\n                    interpolator = defaultScrollInterpolator(_index, props);\n                }\n\n                animatedValue = this._scrollPos.interpolate({\n                    ...interpolator,\n                    extrapolate: \"clamp\",\n                });\n            }\n\n            interpolators.push(animatedValue);\n        });\n\n        this.setState({ interpolators });\n    }\n\n    _getSlideAnimation(index, toValue) {\n        const { interpolators } = this.state;\n        const { activeAnimationType, activeAnimationOptions } = this.props;\n\n        const animatedValue = interpolators && interpolators[index];\n\n        if (!animatedValue && animatedValue !== 0) {\n            return null;\n        }\n\n        const animationCommonOptions = {\n            isInteraction: false,\n            useNativeDriver: true,\n            ...activeAnimationOptions,\n            toValue: toValue,\n        };\n\n        return Animated.parallel([\n            Animated[\"timing\"](animatedValue, {\n                ...animationCommonOptions,\n                easing: Easing.linear,\n            }),\n            Animated[activeAnimationType](animatedValue, {\n                ...animationCommonOptions,\n            }),\n        ]);\n    }\n\n    _playCustomSlideAnimation(current, next) {\n        const { interpolators } = this.state;\n        const itemsLength = this._getCustomDataLength();\n        const _currentIndex = this._getCustomIndex(current);\n        const _currentDataIndex = this._getDataIndex(_currentIndex);\n        const _nextIndex = this._getCustomIndex(next);\n        const _nextDataIndex = this._getDataIndex(_nextIndex);\n        const animations = [];\n\n        // Keep animations in sync when looping\n        if (this._enableLoop()) {\n            for (let i = 0; i < itemsLength; i++) {\n                if (this._getDataIndex(i) === _currentDataIndex && interpolators[i]) {\n                    animations.push(this._getSlideAnimation(i, 0));\n                } else if (\n                    this._getDataIndex(i) === _nextDataIndex &&\n                    interpolators[i]\n                ) {\n                    animations.push(this._getSlideAnimation(i, 1));\n                }\n            }\n        } else {\n            if (interpolators[current]) {\n                animations.push(this._getSlideAnimation(current, 0));\n            }\n            if (interpolators[next]) {\n                animations.push(this._getSlideAnimation(next, 1));\n            }\n        }\n\n        Animated.parallel(animations, { stopTogether: false }).start();\n    }\n\n    _hackActiveSlideAnimation(index, goTo, force = false) {\n        const { data } = this.props;\n\n        if (\n            !this._mounted ||\n            !this._carouselRef ||\n            !this._positions[index] ||\n            (!force && this._enableLoop())\n        ) {\n            return;\n        }\n\n        const offset = this._positions[index] && this._positions[index].start;\n\n        if (!offset && offset !== 0) {\n            return;\n        }\n\n        const itemsLength = data && data.length;\n        const direction = goTo || itemsLength === 1 ? \"start\" : \"end\";\n\n        this._scrollTo(offset + (direction === \"start\" ? -1 : 1), false);\n\n        clearTimeout(this._hackSlideAnimationTimeout);\n        this._hackSlideAnimationTimeout = setTimeout(() => {\n            this._scrollTo(offset, false);\n        }, 50); // works randomly when set to '0'\n    }\n\n    _lockScroll() {\n        const { lockScrollTimeoutDuration } = this.props;\n        clearTimeout(this._lockScrollTimeout);\n        this._lockScrollTimeout = setTimeout(() => {\n            this._releaseScroll();\n        }, lockScrollTimeoutDuration);\n        this._setScrollEnabled(false);\n    }\n\n    _releaseScroll() {\n        clearTimeout(this._lockScrollTimeout);\n        this._setScrollEnabled(true);\n    }\n\n    _repositionScroll(index) {\n        const { data, loopClonesPerSide } = this.props;\n        const dataLength = data && data.length;\n\n        if (\n            !this._enableLoop() ||\n            !dataLength ||\n            (index >= loopClonesPerSide && index < dataLength + loopClonesPerSide)\n        ) {\n            return;\n        }\n\n        let repositionTo = index;\n\n        if (index >= dataLength + loopClonesPerSide) {\n            repositionTo = index - dataLength;\n        } else if (index < loopClonesPerSide) {\n            repositionTo = index + dataLength;\n        }\n\n        this._snapToItem(repositionTo, false, false, false, false);\n    }\n\n    _scrollTo(offset, animated = true) {\n        const { vertical } = this.props;\n        const wrappedRef = this._getWrappedRef();\n\n        if (!this._mounted || !wrappedRef) {\n            return;\n        }\n\n        const specificOptions = this._needsScrollView()\n            ? {\n                x: vertical ? 0 : offset,\n                y: vertical ? offset : 0,\n            }\n            : {\n                offset,\n            };\n        const options = {\n            ...specificOptions,\n            animated,\n        };\n\n        if (this._needsScrollView()) {\n            wrappedRef.scrollTo(options);\n        } else {\n            wrappedRef.scrollToOffset(options);\n        }\n    }\n\n    _onScroll(event?) {\n        const { callbackOffsetMargin, enableMomentum, onScroll } = this.props;\n\n        const scrollOffset = event\n            ? this._getScrollOffset(event)\n            : this._currentContentOffset;\n        const nextActiveItem = this._getActiveItem(scrollOffset);\n        const itemReached = nextActiveItem === this._itemToSnapTo;\n        const scrollConditions =\n            scrollOffset >= this._scrollOffsetRef - callbackOffsetMargin &&\n            scrollOffset <= this._scrollOffsetRef + callbackOffsetMargin;\n\n        this._currentContentOffset = scrollOffset;\n        this._onScrollTriggered = true;\n        this._lastScrollDate = Date.now();\n\n        if (\n            this._activeItem !== nextActiveItem &&\n            this._shouldUseCustomAnimation()\n        ) {\n            this._playCustomSlideAnimation(this._activeItem, nextActiveItem);\n        }\n\n        if (enableMomentum) {\n            clearTimeout(this._snapNoMomentumTimeout);\n\n            if (this._activeItem !== nextActiveItem) {\n                this._activeItem = nextActiveItem;\n            }\n\n            if (itemReached) {\n                if (this._canFireBeforeCallback) {\n                    this._onBeforeSnap(this._getDataIndex(nextActiveItem));\n                }\n\n                if (scrollConditions && this._canFireCallback) {\n                    this._onSnap(this._getDataIndex(nextActiveItem));\n                }\n            }\n        } else if (this._activeItem !== nextActiveItem && itemReached) {\n            if (this._canFireBeforeCallback) {\n                this._onBeforeSnap(this._getDataIndex(nextActiveItem));\n            }\n\n            if (scrollConditions) {\n                this._activeItem = nextActiveItem;\n\n                if (this._canLockScroll()) {\n                    this._releaseScroll();\n                }\n\n                if (this._canFireCallback) {\n                    this._onSnap(this._getDataIndex(nextActiveItem));\n                }\n            }\n        }\n\n        if (\n            nextActiveItem === this._itemToSnapTo &&\n            scrollOffset === this._scrollOffsetRef\n        ) {\n            this._repositionScroll(nextActiveItem);\n        }\n\n        if (typeof onScroll === \"function\" && event) {\n            onScroll(event);\n        }\n    }\n\n    _onStartShouldSetResponderCapture(event) {\n        const { onStartShouldSetResponderCapture } = this.props;\n\n        if (onStartShouldSetResponderCapture) {\n            onStartShouldSetResponderCapture(event);\n        }\n\n        return this._getScrollEnabled();\n    }\n\n    _onTouchStart() {\n        const { onTouchStart } = this.props;\n\n        // `onTouchStart` is fired even when `scrollEnabled` is set to `false`\n        if (this._getScrollEnabled() !== false && this._autoplaying) {\n            this.pauseAutoPlay();\n        }\n\n        if (onTouchStart) {\n            onTouchStart();\n        }\n    }\n\n    _onTouchEnd() {\n        const { onTouchEnd } = this.props;\n\n        if (\n            this._getScrollEnabled() !== false &&\n            this._autoplay &&\n            !this._autoplaying\n        ) {\n            // This event is buggy on Android, so a fallback is provided in _onScrollEnd()\n            this.startAutoplay();\n        }\n\n        if (onTouchEnd) {\n            onTouchEnd();\n        }\n    }\n\n    // Used when `enableSnap` is ENABLED\n    _onScrollBeginDrag(event) {\n        const { onScrollBeginDrag } = this.props;\n\n        if (!this._getScrollEnabled()) {\n            return;\n        }\n\n        this._scrollStartOffset = this._getScrollOffset(event);\n        this._scrollStartActive = this._getActiveItem(this._scrollStartOffset);\n        this._ignoreNextMomentum = false;\n        // this._canFireCallback = false;\n\n        if (onScrollBeginDrag) {\n            onScrollBeginDrag(event);\n        }\n    }\n\n    // Used when `enableMomentum` is DISABLED\n    _onScrollEndDrag(event) {\n        const { onScrollEndDrag } = this.props;\n\n        if (this._carouselRef) {\n            this._onScrollEnd && this._onScrollEnd();\n        }\n\n        if (onScrollEndDrag) {\n            onScrollEndDrag(event);\n        }\n    }\n\n    // Used when `enableMomentum` is ENABLED\n    _onMomentumScrollEnd(event) {\n        const { onMomentumScrollEnd } = this.props;\n\n        if (this._carouselRef) {\n            this._onScrollEnd && this._onScrollEnd();\n        }\n\n        if (onMomentumScrollEnd) {\n            onMomentumScrollEnd(event);\n        }\n    }\n\n    _onScrollEnd(event?) {\n        const { autoplayDelay, enableSnap } = this.props;\n\n        if (this._ignoreNextMomentum) {\n            // iOS fix\n            this._ignoreNextMomentum = false;\n            return;\n        }\n\n        if (this._currentContentOffset === this._scrollEndOffset) {\n            return;\n        }\n\n        this._scrollEndOffset = this._currentContentOffset;\n        this._scrollEndActive = this._getActiveItem(this._scrollEndOffset);\n\n        if (enableSnap) {\n            this._snapScroll(this._scrollEndOffset - this._scrollStartOffset);\n        }\n\n        // The touchEnd event is buggy on Android, so this will serve as a fallback whenever needed\n        // https://github.com/facebook/react-native/issues/9439\n        if (this._autoplay && !this._autoplaying) {\n            clearTimeout(this._enableAutoplayTimeout);\n            this._enableAutoplayTimeout = setTimeout(() => {\n                this.startAutoplay();\n            }, autoplayDelay + 50);\n        }\n    }\n\n    // Due to a bug, this event is only fired on iOS\n    // https://github.com/facebook/react-native/issues/6791\n    // it's fine since we're only fixing an iOS bug in it, so ...\n    _onTouchRelease(event) {\n        const { enableMomentum } = this.props;\n\n        if (enableMomentum && IS_IOS) {\n            clearTimeout(this._snapNoMomentumTimeout);\n            this._snapNoMomentumTimeout = setTimeout(() => {\n                this._snapToItem(this._activeItem);\n            }, 100);\n        }\n    }\n\n    _onLayout(event) {\n        const { onLayout } = this.props;\n\n        // Prevent unneeded actions during the first 'onLayout' (triggered on init)\n        if (this._onLayoutInitDone) {\n            this._initPositionsAndInterpolators();\n            this._snapToItem(this._activeItem, false, false, false, false);\n        } else {\n            this._onLayoutInitDone = true;\n        }\n\n        if (onLayout) {\n            onLayout(event);\n        }\n    }\n\n    _snapScroll(delta) {\n        const { swipeThreshold } = this.props;\n\n        // When using momentum and releasing the touch with\n        // no velocity, scrollEndActive will be undefined (iOS)\n        if (!this._scrollEndActive && this._scrollEndActive !== 0 && IS_IOS) {\n            this._scrollEndActive = this._scrollStartActive;\n        }\n\n        if (this._scrollStartActive !== this._scrollEndActive) {\n            // Snap to the new active item\n            this._snapToItem(this._scrollEndActive);\n        } else {\n            // Snap depending on delta\n            if (delta > 0) {\n                if (delta > swipeThreshold) {\n                    this._snapToItem(this._scrollStartActive + 1);\n                } else {\n                    this._snapToItem(this._scrollEndActive);\n                }\n            } else if (delta < 0) {\n                if (delta < -swipeThreshold) {\n                    this._snapToItem(this._scrollStartActive - 1);\n                } else {\n                    this._snapToItem(this._scrollEndActive);\n                }\n            } else {\n                // Snap to current\n                this._snapToItem(this._scrollEndActive);\n            }\n        }\n    }\n\n    _snapToItem(\n        index,\n        animated = true,\n        fireCallback = true,\n        initial = false,\n        lockScroll = true\n    ) {\n        const { enableMomentum, onSnapToItem, onBeforeSnapToItem } = this.props;\n        const itemsLength = this._getCustomDataLength();\n        const wrappedRef = this._getWrappedRef();\n\n        if (!itemsLength || !wrappedRef) {\n            return;\n        }\n\n        if (!index || index < 0) {\n            index = 0;\n        } else if (itemsLength > 0 && index >= itemsLength) {\n            index = itemsLength - 1;\n        }\n\n        if (index !== this._previousActiveItem) {\n            this._previousActiveItem = index;\n\n            // Placed here to allow overscrolling for edges items\n            if (lockScroll && this._canLockScroll()) {\n                this._lockScroll();\n            }\n\n            if (fireCallback) {\n                if (onBeforeSnapToItem) {\n                    this._canFireBeforeCallback = true;\n                }\n\n                if (onSnapToItem) {\n                    this._canFireCallback = true;\n                }\n            }\n        }\n\n        this._itemToSnapTo = index;\n        this._scrollOffsetRef =\n            this._positions[index] && this._positions[index].start;\n        this._onScrollTriggered = false;\n\n        if (!this._scrollOffsetRef && this._scrollOffsetRef !== 0) {\n            return;\n        }\n\n        this._scrollTo(this._scrollOffsetRef, animated);\n\n        this._scrollEndOffset = this._currentContentOffset;\n\n        if (enableMomentum) {\n            // iOS fix, check the note in the constructor\n            if (!initial) {\n                this._ignoreNextMomentum = true;\n            }\n\n            // When momentum is enabled and the user is overscrolling or swiping very quickly,\n            // 'onScroll' is not going to be triggered for edge items. Then callback won't be\n            // fired and loop won't work since the scrollview is not going to be repositioned.\n            // As a workaround, '_onScroll()' will be called manually for these items if a given\n            // condition hasn't been met after a small delay.\n            // WARNING: this is ok only when relying on 'momentumScrollEnd', not with 'scrollEndDrag'\n            if (index === 0 || index === itemsLength - 1) {\n                clearTimeout(this._edgeItemTimeout);\n                this._edgeItemTimeout = setTimeout(() => {\n                    if (\n                        !initial &&\n                        index === this._activeItem &&\n                        !this._onScrollTriggered\n                    ) {\n                        this._onScroll();\n                    }\n                }, 250);\n            }\n        }\n    }\n\n    _onBeforeSnap(index) {\n        const { onBeforeSnapToItem } = this.props;\n\n        if (!this._carouselRef) {\n            return;\n        }\n\n        this._canFireBeforeCallback = false;\n        onBeforeSnapToItem && onBeforeSnapToItem(index);\n    }\n\n    _onSnap(index) {\n        const { onSnapToItem } = this.props;\n\n        if (!this._carouselRef) {\n            return;\n        }\n\n        this._canFireCallback = false;\n        onSnapToItem && onSnapToItem(index);\n    }\n\n    startAutoplay() {\n        const { autoplayInterval, autoplayDelay } = this.props;\n        this._autoplay = true;\n\n        if (this._autoplaying) {\n            return;\n        }\n\n        clearTimeout(this._autoplayTimeout);\n        this._autoplayTimeout = setTimeout(() => {\n            this._autoplaying = true;\n            this._autoplayInterval = setInterval(() => {\n                if (this._autoplaying) {\n                    this.snapToNext();\n                }\n            }, autoplayInterval);\n        }, autoplayDelay);\n    }\n\n    pauseAutoPlay() {\n        this._autoplaying = false;\n        clearTimeout(this._autoplayTimeout);\n        clearTimeout(this._enableAutoplayTimeout);\n        clearInterval(this._autoplayInterval);\n    }\n\n    stopAutoplay() {\n        this._autoplay = false;\n        this.pauseAutoPlay();\n    }\n\n    snapToItem(index, animated = true, fireCallback = true) {\n        if (!index || index < 0) {\n            index = 0;\n        }\n\n        const positionIndex = this._getPositionIndex(index);\n\n        if (positionIndex === this._activeItem) {\n            return;\n        }\n\n        this._snapToItem(positionIndex, animated, fireCallback);\n    }\n\n    snapToNext(animated = true, fireCallback = true) {\n        const itemsLength = this._getCustomDataLength();\n\n        let newIndex = this._activeItem + 1;\n        if (newIndex > itemsLength - 1) {\n            if (!this._enableLoop()) {\n                return;\n            }\n            newIndex = 0;\n        }\n        this._snapToItem(newIndex, animated, fireCallback);\n    }\n\n    snapToPrev(animated = true, fireCallback = true) {\n        const itemsLength = this._getCustomDataLength();\n\n        let newIndex = this._activeItem - 1;\n        if (newIndex < 0) {\n            if (!this._enableLoop()) {\n                return;\n            }\n            newIndex = itemsLength - 1;\n        }\n        this._snapToItem(newIndex, animated, fireCallback);\n    }\n\n    // https://github.com/facebook/react-native/issues/1831#issuecomment-231069668\n    triggerRenderingHack(offset) {\n        // Avoid messing with user scroll\n        if (Date.now() - this._lastScrollDate < 500) {\n            return;\n        }\n\n        const scrollPosition = this._currentContentOffset;\n        if (!scrollPosition && scrollPosition !== 0) {\n            return;\n        }\n\n        const scrollOffset = offset || (scrollPosition === 0 ? 1 : -1);\n        this._scrollTo(scrollPosition + scrollOffset, false);\n    }\n\n    _getSlideInterpolatedStyle(index, animatedValue) {\n        const { layoutCardOffset, slideInterpolatedStyle } = this.props;\n\n        if (slideInterpolatedStyle) {\n            return slideInterpolatedStyle(index, animatedValue, this.props);\n        } else if (this._shouldUseTinderLayout()) {\n            return tinderAnimatedStyles(\n                index,\n                animatedValue,\n                this.props,\n                layoutCardOffset\n            );\n        } else if (this._shouldUseStackLayout()) {\n            return stackAnimatedStyles(\n                index,\n                animatedValue,\n                this.props,\n                layoutCardOffset\n            );\n        } else if (this._shouldUseShiftLayout()) {\n            return shiftAnimatedStyles(index, animatedValue, this.props);\n        } else {\n            return defaultAnimatedStyles(index, animatedValue, this.props);\n        }\n    }\n\n    _renderItem({ item, index }) {\n        const { interpolators } = this.state;\n        const {\n            hasParallaxImages,\n            itemWidth,\n            itemHeight,\n            keyExtractor,\n            renderItem,\n            sliderHeight,\n            sliderWidth,\n            slideStyle,\n            vertical,\n        } = this.props;\n\n        const animatedValue = interpolators && interpolators[index];\n\n        if (!animatedValue && animatedValue !== 0) {\n            return null;\n        }\n\n        const animate = this._shouldAnimateSlides();\n        const Component = animate ? Animated.View : View;\n        const animatedStyle = animate\n            ? this._getSlideInterpolatedStyle(index, animatedValue)\n            : {};\n\n        const parallaxProps = hasParallaxImages\n            ? {\n                scrollPosition: this._scrollPos,\n                carouselRef: this._carouselRef,\n                vertical,\n                sliderWidth,\n                sliderHeight,\n                itemWidth,\n                itemHeight,\n            }\n            : undefined;\n\n        const mainDimension = vertical\n            ? { height: itemHeight }\n            : { width: itemWidth };\n        const specificProps = this._needsScrollView()\n            ? {\n                key: keyExtractor\n                    // @ts-ignore\n                    ? keyExtractor(item, index)\n                    : this._getKeyExtractor(item, index),\n            }\n            : {};\n\n        return (\n            <Component\n                style={[mainDimension, slideStyle, animatedStyle] as any}\n                pointerEvents={\"box-none\"}\n                {...specificProps}\n            >\n                {renderItem({ item, index }, parallaxProps)}\n            </Component>\n        );\n    }\n\n    _getComponentOverridableProps = (): any => {\n        const {\n            enableMomentum,\n            itemWidth,\n            itemHeight,\n            loopClonesPerSide,\n            sliderWidth,\n            sliderHeight,\n            vertical,\n        } = this.props;\n\n        const visibleItems =\n            Math.ceil(\n                vertical ? sliderHeight / itemHeight : sliderWidth / itemWidth\n            ) + 1;\n        const initialNumPerSide = this._enableLoop() ? loopClonesPerSide : 2;\n        const initialNumToRender = visibleItems + initialNumPerSide * 2;\n        const maxToRenderPerBatch = 1 + initialNumToRender * 2;\n        const windowSize = maxToRenderPerBatch;\n\n        const specificProps = !this._needsScrollView()\n            ? {\n                initialNumToRender: initialNumToRender,\n                maxToRenderPerBatch: maxToRenderPerBatch,\n                windowSize: windowSize,\n                // updateCellsBatchingPeriod\n            }\n            : {};\n\n        return {\n            decelerationRate: enableMomentum ? 0.9 : \"fast\",\n            showsHorizontalScrollIndicator: false,\n            showsVerticalScrollIndicator: false,\n            overScrollMode: \"never\",\n            automaticallyAdjustContentInsets: false,\n            directionalLockEnabled: true,\n            pinchGestureEnabled: false,\n            scrollsToTop: false,\n            removeClippedSubviews: !this._needsScrollView(),\n            inverted: this._needsRTLAdaptations(),\n            // renderToHardwareTextureAndroid: true,\n            ...specificProps,\n        };\n    }\n\n    _getComponentStaticProps() {\n        const { hideCarousel } = this.state;\n        const {\n            containerCustomStyle,\n            contentContainerCustomStyle,\n            keyExtractor,\n            sliderWidth,\n            sliderHeight,\n            style,\n            vertical,\n        } = this.props;\n\n        const containerStyle = [\n            containerCustomStyle || style || {},\n            hideCarousel ? { opacity: 0 } : {},\n            vertical\n                ? { height: sliderHeight, flexDirection: \"column\" }\n                : // LTR hack; see https://github.com/facebook/react-native/issues/11960\n                // and https://github.com/facebook/react-native/issues/13100#issuecomment-328986423\n                {\n                    width: sliderWidth,\n                    flexDirection: this._needsRTLAdaptations() ? \"row-reverse\" : \"row\",\n                },\n        ];\n        const contentContainerStyle = [\n            vertical\n                ? {\n                    paddingTop: this._getContainerInnerMargin(),\n                    paddingBottom: this._getContainerInnerMargin(true),\n                }\n                : {\n                    paddingLeft: this._getContainerInnerMargin(),\n                    paddingRight: this._getContainerInnerMargin(true),\n                },\n            contentContainerCustomStyle || {},\n        ];\n\n        const specificProps = !this._needsScrollView()\n            ? {\n                // extraData: this.state,\n                renderItem: this._renderItem,\n                numColumns: 1,\n                keyExtractor: keyExtractor || this._getKeyExtractor,\n            }\n            : {};\n\n        return {\n            ref: c => (this._carouselRef = c),\n            data: this._getCustomData(),\n            style: containerStyle,\n            contentContainerStyle: contentContainerStyle,\n            horizontal: !vertical,\n            scrollEventThrottle: 1,\n            onScroll: this._onScrollHandler,\n            onScrollBeginDrag: this._onScrollBeginDrag,\n            onScrollEndDrag: this._onScrollEndDrag,\n            onMomentumScrollEnd: this._onMomentumScrollEnd,\n            onResponderRelease: this._onTouchRelease,\n            onStartShouldSetResponderCapture: this._onStartShouldSetResponderCapture,\n            onTouchStart: this._onTouchStart,\n            onTouchEnd: this._onScrollEnd,\n            onLayout: this._onLayout,\n            ...specificProps,\n        };\n    }\n\n    render() {\n        const { data, renderItem, useScrollView } = this.props;\n\n        if (!data || !renderItem) {\n            return null;\n        }\n\n        const props = {\n            ...this._getComponentOverridableProps(),\n            ...this.props,\n            ...this._getComponentStaticProps(),\n        };\n\n        const ScrollViewComponent =\n            typeof useScrollView === \"function\" ? useScrollView : AnimatedScrollView;\n\n        return this._needsScrollView() ? (\n            // @ts-ignore\n            <ScrollViewComponent {...props}>\n                {this._getCustomData().map((item, index) => {\n                    return this._renderItem({ item, index });\n                })}\n            </ScrollViewComponent>\n        ) : (\n        // @ts-ignore\n            <AnimatedFlatList {...props} />\n        );\n    }\n}\n"]}