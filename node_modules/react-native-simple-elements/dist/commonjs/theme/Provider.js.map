{"version":3,"sources":["Provider.tsx"],"names":["ThemeProviver","props","colorSchemeName","theme","Appearance","getColorScheme","reduceMotionEnabled","setReduceMotionEnabled","React","useState","colorScheme","setColorScheme","handleAppearanceChange","preferences","drawerIsOpen","setDrawerIsOpen","useEffect","AccessibilityInfo","addEventListener","removeEventListener","addChangeListener","removeChangeListener","getTheme","providedTheme","DarkTheme","LightTheme","animation","scale","children","settings"],"mappings":";;;;;;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;AASA,MAAMA,aAAa,GAAG,CAAC,EAAE,GAAGC;AAAL,CAAD,KAAyB;AAC3C,QAAMC,eAAe,GAChB,CAACD,KAAK,CAACE,KAAP,KAAgBC,uBAAhB,aAAgBA,uBAAhB,uBAAgBA,wBAAYC,cAAZ,EAAhB,CAAD,IAAmDJ,KAAK,CAACC,eAAN,IAAyB,OADhF;AAGA,QAAM,CAACI,mBAAD,EAAsBC,sBAAtB,IAAgDC,KAAK,CAACC,QAAN,CAClD,KADkD,CAAtD;AAGA,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCH,KAAK,CAACC,QAAN,CAClCP,eADkC,CAAtC;;AAIA,QAAMU,sBAAsB,GACxBC,WAD2B,IAE1B;AACD,UAAM;AAAEH,MAAAA;AAAF,QAAkBG,WAAxB;AACAF,IAAAA,cAAc,CAACD,WAAD,CAAd;AACH,GALD;;AAOA,QAAM,CAAEI,YAAF,EAAgBC,eAAhB,IAAoCP,KAAK,CAACC,QAAN,CAAe,KAAf,CAA1C;AAEAD,EAAAA,KAAK,CAACQ,SAAN,CAAgB,MAAM;AAClB,QAAI,CAACf,KAAK,CAACE,KAAX,EAAkB;AACdc,qCAAkBC,gBAAlB,CACI,qBADJ,EAEIX,sBAFJ;AAIH;;AACD,WAAO,MAAM;AACT,UAAI,CAACN,KAAK,CAACE,KAAX,EAAkB;AACdc,uCAAkBE,mBAAlB,CACI,qBADJ,EAEIZ,sBAFJ;AAIH;AACJ,KAPD;AAQH,GAfD,EAeG,CAACN,KAAK,CAACE,KAAP,CAfH;AAiBAK,EAAAA,KAAK,CAACQ,SAAN,CAAgB,MAAM;AAClB,QAAI,CAACf,KAAK,CAACE,KAAX,EAAkBC,0GAAYgB,iBAAZ,CAA8BR,sBAA9B;AAClB,WAAO,MAAM;AACT,UAAI,CAACX,KAAK,CAACE,KAAX,EACIC,0GAAYiB,oBAAZ,CAAiCT,sBAAjC;AACP,KAHD;AAIH,GAND,EAMG,CAACX,KAAK,CAACE,KAAP,CANH;;AAQA,QAAMmB,QAAQ,GAAG,MAAM;AACnB,UAAM;AAAEnB,MAAAA,KAAK,EAAEoB;AAAT,QAA2BtB,KAAjC;;AAEA,QAAIsB,aAAJ,EAAmB;AACf,aAAOA,aAAP;AACH,KAFD,MAEO;AACH,YAAMpB,KAAK,GAAIO,WAAW,KAAK,MAAhB,GACTc,kBADS,GAETC,mBAFN;AAIA,aAAO,EACH,GAAGtB,KADA;AAEHuB,QAAAA,SAAS,EAAE,EACP,GAAGvB,KAAK,CAACuB,SADF;AAEPC,UAAAA,KAAK,EAAErB,mBAAmB,GAAG,CAAH,GAAO;AAF1B;AAFR,OAAP;AAOH;AACJ,GAlBD;;AAoBA,QAAM;AAAEsB,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,MAAyB5B,KAA/B;AACA,sBACI,oBAAC,mBAAD,qBACI,oBAAC,kBAAD;AAAkB,IAAA,KAAK,EAAE4B,QAAQ,IAAI;AAArC,kBACI,oBAAC,sBAAD,CAAe,QAAf;AAAwB,IAAA,KAAK,EAAE;AAC3Bf,MAAAA,YAD2B;AAE3BC,MAAAA;AAF2B;AAA/B,kBAII,oBAAC,+BAAD;AAAe,IAAA,KAAK,EAAEO,QAAQ;AAA9B,KACKM,QADL,CAJJ,CADJ,CADJ,CADJ;AAcH,CAhFD;;eAkFe5B,a","sourcesContent":["\r\nimport * as React from \"react\";\r\nimport { AccessibilityInfo, Appearance, ColorSchemeName } from \"react-native\";\r\nimport { DefaultTheme, ThemeProvider } from \"styled-components\";\r\nimport { Provider as SettingsProvider, Settings } from \"./settings\";\r\nimport PortalHost from \"../Portal/PortalHost\";\r\nimport LightTheme from \"./LightTheme\";\r\nimport DarkTheme from \"./DarkTheme\";\r\nimport DrawerContext from \"../Drawer/DrawerContext\";\r\n\r\ntype Props = {\r\n    children: React.ReactNode;\r\n    theme?: DefaultTheme;\r\n    settings?: Settings;\r\n    colorSchemeName?: ColorSchemeName;\r\n};\r\n\r\nconst ThemeProviver = ({ ...props }: Props) => {\r\n    const colorSchemeName =\r\n        (!props.theme && Appearance?.getColorScheme()) || (props.colorSchemeName || \"light\");\r\n\r\n    const [reduceMotionEnabled, setReduceMotionEnabled] = React.useState<boolean>(\r\n        false\r\n    );\r\n    const [colorScheme, setColorScheme] = React.useState<ColorSchemeName>(\r\n        colorSchemeName\r\n    );\r\n\r\n    const handleAppearanceChange = (\r\n        preferences: Appearance.AppearancePreferences\r\n    ) => {\r\n        const { colorScheme } = preferences;\r\n        setColorScheme(colorScheme);\r\n    };\r\n\r\n    const [ drawerIsOpen, setDrawerIsOpen ] = React.useState(false);\r\n\r\n    React.useEffect(() => {\r\n        if (!props.theme) {\r\n            AccessibilityInfo.addEventListener(\r\n                \"reduceMotionChanged\",\r\n                setReduceMotionEnabled\r\n            );\r\n        }\r\n        return () => {\r\n            if (!props.theme) {\r\n                AccessibilityInfo.removeEventListener(\r\n                    \"reduceMotionChanged\",\r\n                    setReduceMotionEnabled\r\n                );\r\n            }\r\n        };\r\n    }, [props.theme]);\r\n\r\n    React.useEffect(() => {\r\n        if (!props.theme) Appearance?.addChangeListener(handleAppearanceChange);\r\n        return () => {\r\n            if (!props.theme)\r\n                Appearance?.removeChangeListener(handleAppearanceChange);\r\n        };\r\n    }, [props.theme]);\r\n\r\n    const getTheme = () => {\r\n        const { theme: providedTheme } = props;\r\n\r\n        if (providedTheme) {\r\n            return providedTheme;\r\n        } else {\r\n            const theme = (colorScheme === \"dark\"\r\n                ? DarkTheme\r\n                : LightTheme) as DefaultTheme;\r\n\r\n            return {\r\n                ...theme,\r\n                animation: {\r\n                    ...theme.animation,\r\n                    scale: reduceMotionEnabled ? 0 : 1,\r\n                },\r\n            };\r\n        }\r\n    };\r\n\r\n    const { children, settings } = props;\r\n    return (\r\n        <PortalHost>\r\n            <SettingsProvider value={settings || { }}>\r\n                <DrawerContext.Provider value={{\r\n                    drawerIsOpen,\r\n                    setDrawerIsOpen,\r\n                }}>\r\n                    <ThemeProvider theme={getTheme()}>\r\n                        {children}\r\n                    </ThemeProvider>\r\n                </DrawerContext.Provider>\r\n            </SettingsProvider>\r\n        </PortalHost>\r\n    );\r\n};\r\n\r\nexport default ThemeProviver;\r\n"]}