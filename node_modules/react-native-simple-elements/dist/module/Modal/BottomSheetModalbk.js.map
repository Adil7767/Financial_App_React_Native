{"version":3,"sources":["BottomSheetModalbk.tsx"],"names":["React","Animated","BackHandler","Dimensions","Easing","StyleSheet","TouchableWithoutFeedback","getStatusBarHeight","getBottomSpace","ThemeContext","Surface","WindowHeight","get","height","defaultProps","dismissable","visible","overlayAccessibilityLabel","DEFAULT_DURATION","TOP_INSET","BOTTOM_INSET","Modal","onDismiss","children","style","contentContainerStyle","rendered","setRendered","useState","opacity","Value","theme","useContext","colors","useEffect","showModal","hideModal","removeEventListener","handleBack","addEventListener","scale","animation","timing","toValue","duration","easing","out","cubic","useNativeDriver","start","finished","absoluteFill","styles","wrapper","marginTop","marginBottom","interpolate","inputRange","outputRange","undefined","backdrop","backgroundColor","content","create","flex","absoluteFillObject","justifyContent"],"mappings":"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","sourcesContent":["import * as React from \"react\";\r\nimport {\r\n    Animated,\r\n    BackHandler,\r\n    Dimensions,\r\n    Easing,\r\n    StyleProp,\r\n    StyleSheet,\r\n    TouchableWithoutFeedback,\r\n    ViewStyle,\r\n} from \"react-native\";\r\nimport {\r\n    getStatusBarHeight,\r\n    getBottomSpace,\r\n} from \"react-native-iphone-x-helper\";\r\nimport { DefaultTheme, ThemeContext } from \"styled-components\";\r\nimport Surface from \"../Surface\";\r\n\r\nconst WindowHeight = Dimensions.get(\"window\").height;\r\n\r\ntype Props = {\r\n    /**\r\n     * Determines whether clicking outside the modal dismiss it.\r\n     */\r\n    dismissable?: boolean;\r\n    /**\r\n     * Callback that is called when the user dismisses the modal.\r\n     */\r\n    onDismiss?: () => void;\r\n    /**\r\n     * Accessibility label for the overlay. This is read by the screen reader when the user taps outside the modal.\r\n     */\r\n    overlayAccessibilityLabel?: string;\r\n    /**\r\n     * Determines Whether the modal is visible.\r\n     */\r\n    visible: boolean;\r\n    /**\r\n     * Content of the `Modal`.\r\n     */\r\n    children: React.ReactNode;\r\n    /**\r\n     * Style for the content of the modal\r\n     */\r\n    contentContainerStyle?: StyleProp<ViewStyle>;\r\n    /**\r\n     * Style for the wrapper of the modal.\r\n     * Use this prop to change the default wrapper style or to override safe area insets with marginTop and marginBottom.\r\n     */\r\n    style?: StyleProp<ViewStyle>;\r\n    /**\r\n     * @optional\r\n     */\r\n    theme?: DefaultTheme;\r\n};\r\n\r\nconst defaultProps = {\r\n    dismissable: true,\r\n    visible: false,\r\n    overlayAccessibilityLabel: \"Close modal\",\r\n};\r\n\r\nconst DEFAULT_DURATION = 220;\r\nconst TOP_INSET = getStatusBarHeight(true);\r\nconst BOTTOM_INSET = getBottomSpace();\r\n\r\n/**\r\n * The Modal component is a simple way to present content above an enclosing view.\r\n * To render the `Modal` above other components, you'll need to wrap it with the [`Portal`](portal.html) component.\r\n *\r\n * <div class=\"screenshots\">\r\n *   <figure>\r\n *     <img class=\"medium\" src=\"screenshots/modal.gif\" />\r\n *   </figure>\r\n * </div>\r\n *\r\n * ## Usage\r\n * ```js\r\n * import * as React from 'react';\r\n * import Button from 'react-native-simple-elements/components/Button';\r\n * import Text from 'react-native-simple-elements/components/Text';\r\n * import Modal from 'react-native-simple-elements/components/Modal';\r\n * import Divider from 'react-native-simple-elements/components/Divider';\r\n * import Provider from 'react-native-simple-elements/components/theme/Provider';\r\n *\r\n * const MyComponent = () => {\r\n *   const [visible, setVisible] = React.useState(false);\r\n *\r\n *   const showModal = () => setVisible(true);\r\n *   const hideModal = () => setVisible(false);\r\n *   const containerStyle = {backgroundColor: 'white', padding: 20};\r\n *\r\n *   return (\r\n *     <Provider>\r\n *       <Portal>\r\n *         <Modal visible={visible} onDismiss={hideModal} contentContainerStyle={containerStyle}>\r\n *           <Text>Example Modal.  Click outside this area to dismiss.</Text>\r\n *         </Modal>\r\n *       </Portal>\r\n *       <Button style={{marginTop: 30}} onPress={showModal}>\r\n *         Show\r\n *       </Button>\r\n *     </Provider>\r\n *   );\r\n * };\r\n *\r\n * export default MyComponent;\r\n * ```\r\n */\r\nconst Modal = ({\r\n    visible,\r\n    dismissable,\r\n    onDismiss,\r\n    children,\r\n    style,\r\n    contentContainerStyle,\r\n    overlayAccessibilityLabel,\r\n}: Props) => {\r\n\r\n    const [ rendered, setRendered ] = React.useState(visible);\r\n    const [ opacity, ] = React.useState(new Animated.Value(visible ? 1 : 0));\r\n\r\n    const theme = React.useContext(ThemeContext);\r\n    const { colors } = theme;\r\n\r\n    React.useEffect(() => {\r\n        if (visible) {\r\n            setRendered(true);\r\n            showModal();\r\n        } else {\r\n            hideModal();\r\n        }\r\n\r\n        return () => {\r\n            BackHandler.removeEventListener(\"hardwareBackPress\", handleBack);\r\n        };\r\n    }, [ visible ]);\r\n\r\n    const handleBack = () => {\r\n        if (dismissable) {\r\n            hideModal();\r\n        }\r\n        return true;\r\n    };\r\n\r\n    const showModal = () => {\r\n        BackHandler.removeEventListener(\"hardwareBackPress\", handleBack);\r\n        BackHandler.addEventListener(\"hardwareBackPress\", handleBack);\r\n\r\n        const { scale } = theme.animation;\r\n\r\n        Animated.timing(opacity, {\r\n            toValue: 1,\r\n            duration: scale * DEFAULT_DURATION,\r\n            easing: Easing.out(Easing.cubic),\r\n            useNativeDriver: true,\r\n        }).start();\r\n    };\r\n\r\n    const hideModal = () => {\r\n        BackHandler.removeEventListener(\"hardwareBackPress\", handleBack);\r\n\r\n        const { scale } = theme.animation;\r\n\r\n        Animated.timing(opacity, {\r\n            toValue: 0,\r\n            duration: scale * DEFAULT_DURATION,\r\n            easing: Easing.out(Easing.cubic),\r\n            useNativeDriver: true,\r\n        }).start(({ finished }) => {\r\n            if (!finished) {\r\n                return;\r\n            }\r\n\r\n            if (visible && onDismiss) {\r\n                onDismiss();\r\n            }\r\n\r\n            if (visible) {\r\n                showModal();\r\n            } else {\r\n                setRendered(false);\r\n            }\r\n        });\r\n    };\r\n\r\n    if (!rendered) return null;\r\n\r\n    return (\r\n        <Animated.View\r\n            pointerEvents={visible ? \"auto\" : \"none\"}\r\n            accessibilityViewIsModal\r\n            accessibilityLiveRegion=\"polite\"\r\n            style={StyleSheet.absoluteFill}\r\n            onAccessibilityEscape={hideModal}\r\n        >\r\n            <Animated.View\r\n                style={[\r\n                    styles.wrapper,\r\n                    { marginTop: TOP_INSET, marginBottom: BOTTOM_INSET },\r\n                    {\r\n                        height: opacity.interpolate({\r\n                            inputRange: [0, 1],\r\n                            outputRange: [0, WindowHeight],\r\n                        }),\r\n                    },\r\n                    style,\r\n                ]}\r\n                pointerEvents=\"box-none\"\r\n            >\r\n                <TouchableWithoutFeedback\r\n                    accessibilityLabel={overlayAccessibilityLabel}\r\n                    accessibilityRole=\"button\"\r\n                    disabled={!dismissable}\r\n                    onPress={dismissable ? hideModal : undefined}\r\n                >\r\n                    <Animated.View\r\n                        style={[\r\n                            styles.backdrop,\r\n                            { backgroundColor: colors.backdrop, opacity },\r\n                        ]}\r\n                    />\r\n                </TouchableWithoutFeedback>\r\n                <Surface\r\n                    style={\r\n                        [{ opacity }, styles.content, contentContainerStyle] as StyleProp<\r\n                            ViewStyle\r\n                        >\r\n                    }\r\n                >\r\n                    {children}\r\n                </Surface>\r\n            </Animated.View>\r\n        </Animated.View>\r\n    );\r\n};\r\n\r\nModal.defaultProps = defaultProps;\r\n\r\nexport default Modal;\r\n\r\nconst styles = StyleSheet.create({\r\n    backdrop: {\r\n        flex: 1,\r\n    },\r\n    wrapper: {\r\n        ...StyleSheet.absoluteFillObject,\r\n    },\r\n    content: {\r\n        backgroundColor: \"transparent\",\r\n        justifyContent: \"center\",\r\n    },\r\n});\r\n"]}