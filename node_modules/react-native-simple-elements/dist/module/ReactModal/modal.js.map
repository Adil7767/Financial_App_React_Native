{"version":3,"sources":["modal.tsx"],"names":["React","Animated","DeviceEventEmitter","Dimensions","InteractionManager","KeyboardAvoidingView","Modal","PanResponder","Platform","TouchableWithoutFeedback","View","animatable","buildAnimations","reversePercentage","styles","extractAnimationFromProps","props","animationIn","animationOut","ReactNativeModal","Component","constructor","showContent","isVisible","deviceWidth","get","width","deviceHeight","height","isSwipeable","swipeDirection","pan","state","animEvt","panResponder","create","onMoveShouldSetPanResponder","evt","gestureState","propagateSwipe","shouldSetPanResponder","Math","abs","dx","dy","onSwipeStart","currentSwipingDirection","getSwipingDirection","createAnimationEventForSwipe","onStartShouldSetPanResponder","e","hasScrollableView","_dispatchInstances","some","instance","test","type","scrollTo","scrollOffset","onPanResponderMove","isSwipeDirectionAllowed","newOpacityFactor","calcDistancePercentage","backdropRef","transitionTo","opacity","backdropOpacity","onSwipeMove","scrollHorizontal","offsetX","scrollOffsetMax","x","animated","offsetY","y","onPanResponderRelease","accDistance","getAccDistancePerDirection","swipeThreshold","onSwipeComplete","inSwipeClosingState","swipingDirection","onSwipe","onSwipeCancel","spring","toValue","bounciness","useNativeDriver","start","moveY","y0","moveX","x0","event","direction","Array","isArray","includes","draggedDown","draggedUp","draggedLeft","draggedRight","isDirectionIncluded","setState","isTransitioning","backdropTransitionInTiming","setValue","contentRef","onModalWillShow","interactionHandle","createInteractionHandle","animate","animationInTiming","then","clearInteractionHandle","close","onModalShow","backdropTransitionOutTiming","onModalWillHide","animationOutTiming","open","onModalHide","hasBackdrop","customBackdrop","isValidElement","console","warn","backdropColor","useNativeDriverForBackdrop","onBackdropPress","hasCustomBackdrop","backdropComputedStyle","getDeviceWidth","getDeviceHeight","backgroundColor","backdropWrapper","ref","undefined","backdrop","ValueXY","buildPanResponder","getDerivedStateFromProps","nextProps","componentDidMount","addListener","handleDimensionsUpdate","componentWillUnmount","removeListener","componentDidUpdate","prevProps","render","avoidKeyboard","coverScreen","children","onBackButtonPress","style","otherProps","testID","containerProps","computedStyle","margin","transform","translateY","content","panHandlers","panPosition","getTranslateTransform","getLayout","_children","hideModalContentWhileAnimating","containerView","containerBox","makeBackdrop","OS","concat","supportedOrientations"],"mappings":"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","sourcesContent":["import * as React from \"react\";\r\nimport {\r\n    Animated,\r\n    DeviceEventEmitter,\r\n    Dimensions,\r\n    InteractionManager,\r\n    KeyboardAvoidingView,\r\n    Modal,\r\n    PanResponder,\r\n    PanResponderGestureState,\r\n    PanResponderInstance,\r\n    Platform,\r\n    StyleProp,\r\n    TouchableWithoutFeedback,\r\n    View,\r\n    ViewStyle,\r\n    ViewProps,\r\n} from \"react-native\";\r\nimport * as animatable from \"react-native-animatable\";\r\nimport { Animation, CustomAnimation } from \"react-native-animatable\";\r\n\r\nimport {\r\n    // initializeAnimations,\r\n    buildAnimations,\r\n    reversePercentage,\r\n} from \"./utils\";\r\nimport styles from \"./modal.style\";\r\nimport {\r\n    Direction,\r\n    Orientation,\r\n    OrNull,\r\n    AnimationEvent,\r\n    PresentationStyle,\r\n    OnOrientationChange,\r\n} from \"./types\";\r\n\r\n// Override default react-native-animatable animations\r\n// initializeAnimations();\r\n\r\nexport type OnSwipeCompleteParams = {\r\n    swipingDirection: Direction;\r\n};\r\n\r\ntype State = {\r\n    showContent: boolean;\r\n    isVisible: boolean;\r\n    deviceWidth: number;\r\n    deviceHeight: number;\r\n    isSwipeable: boolean;\r\n    pan: OrNull<Animated.ValueXY>;\r\n};\r\n\r\nexport interface ModalProps extends ViewProps {\r\n    children: React.ReactNode;\r\n    onSwipeStart?: () => void;\r\n    onSwipeMove?: (percentageShown: number) => void;\r\n    onSwipeComplete?: (params: OnSwipeCompleteParams) => void;\r\n    onSwipeCancel?: () => void;\r\n    style?: StyleProp<ViewStyle>;\r\n    swipeDirection?: Direction | Array<Direction>;\r\n    onDismiss?: () => void;\r\n    onShow?: () => void;\r\n    hardwareAccelerated?: boolean;\r\n    onOrientationChange?: OnOrientationChange;\r\n    presentationStyle?: PresentationStyle;\r\n\r\n    // Default ModalProps Provided\r\n    animationIn: Animation | CustomAnimation;\r\n    animationInTiming: number;\r\n    animationOut: Animation | CustomAnimation;\r\n    animationOutTiming: number;\r\n    avoidKeyboard: boolean;\r\n    coverScreen: boolean;\r\n    hasBackdrop: boolean;\r\n    backdropColor: string;\r\n    backdropOpacity: number;\r\n    backdropTransitionInTiming: number;\r\n    backdropTransitionOutTiming: number;\r\n    customBackdrop: React.ReactNode;\r\n    useNativeDriver: boolean;\r\n    useNativeDriverForBackdrop?: boolean;\r\n    deviceHeight: number;\r\n    deviceWidth: number;\r\n    hideModalContentWhileAnimating: boolean;\r\n    propagateSwipe: boolean;\r\n    isVisible: boolean;\r\n    onModalShow: () => void;\r\n    onModalWillShow: () => void;\r\n    onModalHide: () => void;\r\n    onModalWillHide: () => void;\r\n    onBackButtonPress: () => void;\r\n    onBackdropPress: () => void;\r\n    swipeThreshold: number;\r\n    scrollTo: OrNull<(e: any) => void>;\r\n    scrollOffset: number;\r\n    scrollOffsetMax: number;\r\n    scrollHorizontal: boolean;\r\n    statusBarTranslucent?: boolean;\r\n    supportedOrientations?: Orientation[];\r\n}\r\n\r\nconst extractAnimationFromProps = (props: ModalProps) => ({\r\n    animationIn: props.animationIn,\r\n    animationOut: props.animationOut,\r\n});\r\n\r\nexport class ReactNativeModal extends React.Component<ModalProps, State> {\r\n\r\n    public static defaultProps = {\r\n        animationIn: \"slideInUp\",\r\n        animationInTiming: 300,\r\n        animationOut: \"slideOutDown\",\r\n        animationOutTiming: 300,\r\n        avoidKeyboard: false,\r\n        coverScreen: true,\r\n        hasBackdrop: true,\r\n        backdropColor: \"black\",\r\n        backdropOpacity: 0.7,\r\n        backdropTransitionInTiming: 300,\r\n        backdropTransitionOutTiming: 300,\r\n        customBackdrop: null,\r\n        useNativeDriver: false,\r\n        deviceHeight: null,\r\n        deviceWidth: null,\r\n        hideModalContentWhileAnimating: false,\r\n        propagateSwipe: false,\r\n        isVisible: false,\r\n        onModalShow: () => null,\r\n        onModalWillShow: () => null,\r\n        onModalHide: () => null,\r\n        onModalWillHide: () => null,\r\n        onBackdropPress: () => null,\r\n        onBackButtonPress: () => null,\r\n        swipeThreshold: 100,\r\n\r\n        scrollTo: null,\r\n        scrollOffset: 0,\r\n        scrollOffsetMax: 0,\r\n        scrollHorizontal: false,\r\n        supportedOrientations: [\"portrait\", \"landscape\"],\r\n    };\r\n\r\n    // We use an internal state for keeping track of the modal visibility: this allows us to keep\r\n    // the modal visible during the exit animation, even if the user has already change the\r\n    // isVisible prop to false.\r\n    // We store in the state the device width and height so that we can update the modal on\r\n    // device rotation.\r\n    state: State = {\r\n        showContent: true,\r\n        isVisible: false,\r\n        deviceWidth: Dimensions.get(\"screen\").width,\r\n        deviceHeight: Dimensions.get(\"screen\").height,\r\n        isSwipeable: !!this.props.swipeDirection,\r\n        pan: null,\r\n    };\r\n\r\n    isTransitioning = false;\r\n    inSwipeClosingState = false;\r\n    currentSwipingDirection: OrNull<Direction> = null;\r\n\r\n    animationIn: string;\r\n    animationOut: string;\r\n    backdropRef: any;\r\n    contentRef: any;\r\n    panResponder: OrNull<PanResponderInstance> = null;\r\n\r\n    constructor(props: ModalProps) {\r\n        super(props);\r\n        const { animationIn, animationOut } = buildAnimations(\r\n            extractAnimationFromProps(props),\r\n        );\r\n\r\n        this.animationIn = animationIn;\r\n        this.animationOut = animationOut;\r\n\r\n        if (this.state.isSwipeable) {\r\n            this.state = {\r\n                ...this.state,\r\n                pan: new Animated.ValueXY(),\r\n            };\r\n            this.buildPanResponder();\r\n        }\r\n        if (props.isVisible) {\r\n            this.state = {\r\n                ...this.state,\r\n                isVisible: true,\r\n                showContent: true,\r\n            };\r\n        }\r\n    }\r\n\r\n    static getDerivedStateFromProps(nextProps: ModalProps, state: State) {\r\n        if (!state.isVisible && nextProps.isVisible) {\r\n            return { isVisible: true, showContent: true };\r\n        }\r\n        return null;\r\n    }\r\n    componentDidMount() {\r\n        // Show deprecation message\r\n        if ((this.props as any).onSwipe) {\r\n            console.warn(\r\n                \"`<Modal onSwipe=\\\"...\\\" />` is deprecated and will be removed starting from 13.0.0. Use `<Modal onSwipeComplete=\\\"...\\\" />` instead.\",\r\n            );\r\n        }\r\n        DeviceEventEmitter.addListener(\r\n            \"didUpdateDimensions\",\r\n            this.handleDimensionsUpdate,\r\n        );\r\n        if (this.state.isVisible) {\r\n            this.open();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        DeviceEventEmitter.removeListener(\r\n            \"didUpdateDimensions\",\r\n            this.handleDimensionsUpdate,\r\n        );\r\n    }\r\n\r\n    componentDidUpdate(prevProps: ModalProps) {\r\n        // If the animations have been changed then rebuild them to make sure we're\r\n        // using the most up-to-date ones\r\n        if (\r\n            this.props.animationIn !== prevProps.animationIn ||\r\n            this.props.animationOut !== prevProps.animationOut\r\n        ) {\r\n            const { animationIn, animationOut } = buildAnimations(\r\n                extractAnimationFromProps(this.props),\r\n            );\r\n            this.animationIn = animationIn;\r\n            this.animationOut = animationOut;\r\n        }\r\n        // If backdrop opacity has been changed then make sure to update it\r\n        if (\r\n            this.props.backdropOpacity !== prevProps.backdropOpacity &&\r\n            this.backdropRef\r\n        ) {\r\n            this.backdropRef.transitionTo(\r\n                { opacity: this.props.backdropOpacity },\r\n                this.props.backdropTransitionInTiming,\r\n            );\r\n        }\r\n        // On modal open request, we slide the view up and fade in the backdrop\r\n        if (this.props.isVisible && !prevProps.isVisible) {\r\n            this.open();\r\n        } else if (!this.props.isVisible && prevProps.isVisible) {\r\n            // On modal close request, we slide the view down and fade out the backdrop\r\n            this.close();\r\n        }\r\n    }\r\n    getDeviceHeight = () => this.props.deviceHeight || this.state.deviceHeight;\r\n    getDeviceWidth = () => this.props.deviceWidth || this.state.deviceWidth;\r\n    buildPanResponder = () => {\r\n        let animEvt: OrNull<AnimationEvent> = null;\r\n\r\n        this.panResponder = PanResponder.create({\r\n            onMoveShouldSetPanResponder: (evt, gestureState) => {\r\n                // Use propagateSwipe to allow inner content to scroll. See PR:\r\n                // https://github.com/react-native-community/react-native-modal/pull/246\r\n                if (!this.props.propagateSwipe) {\r\n                    // The number \"4\" is just a good tradeoff to make the panResponder\r\n                    // work correctly even when the modal has touchable buttons.\r\n                    // For reference:\r\n                    // https://github.com/react-native-community/react-native-modal/pull/197\r\n                    const shouldSetPanResponder =\r\n                        Math.abs(gestureState.dx) >= 4 || Math.abs(gestureState.dy) >= 4;\r\n                    if (shouldSetPanResponder && this.props.onSwipeStart) {\r\n                        this.props.onSwipeStart();\r\n                    }\r\n\r\n                    this.currentSwipingDirection = this.getSwipingDirection(gestureState);\r\n                    animEvt = this.createAnimationEventForSwipe();\r\n                    return shouldSetPanResponder;\r\n                }\r\n\r\n                return false;\r\n            },\r\n            onStartShouldSetPanResponder: (e: any) => {\r\n                const hasScrollableView =\r\n                    e._dispatchInstances &&\r\n                    e._dispatchInstances.some((instance: any) =>\r\n                        /scrollview|flatlist/i.test(instance.type),\r\n                    );\r\n\r\n                if (\r\n                    hasScrollableView &&\r\n                    this.props.propagateSwipe &&\r\n                    this.props.scrollTo &&\r\n                    this.props.scrollOffset > 0\r\n                ) {\r\n                    return false; // user needs to be able to scroll content back up\r\n                }\r\n                if (this.props.onSwipeStart) {\r\n                    this.props.onSwipeStart();\r\n                }\r\n\r\n                // Cleared so that onPanResponderMove can wait to have some delta\r\n                // to work with\r\n                this.currentSwipingDirection = null;\r\n                return true;\r\n            },\r\n            onPanResponderMove: (evt, gestureState) => {\r\n                // Using onStartShouldSetPanResponder we don't have any delta so we don't know\r\n                // The direction to which the user is swiping until some move have been done\r\n                if (!this.currentSwipingDirection) {\r\n                    if (gestureState.dx === 0 && gestureState.dy === 0) {\r\n                        return;\r\n                    }\r\n\r\n                    this.currentSwipingDirection = this.getSwipingDirection(gestureState);\r\n                    animEvt = this.createAnimationEventForSwipe();\r\n                }\r\n\r\n                if (this.isSwipeDirectionAllowed(gestureState)) {\r\n                    // Dim the background while swiping the modal\r\n                    const newOpacityFactor =\r\n                        1 - this.calcDistancePercentage(gestureState);\r\n\r\n                    this.backdropRef &&\r\n                        this.backdropRef.transitionTo({\r\n                            opacity: this.props.backdropOpacity * newOpacityFactor,\r\n                        });\r\n\r\n                    if (typeof animEvt === \"function\") {\r\n                        animEvt(evt, gestureState);\r\n                    }\r\n\r\n                    if (this.props.onSwipeMove) {\r\n                        this.props.onSwipeMove(newOpacityFactor);\r\n                    }\r\n                } else {\r\n                    if (this.props.scrollTo) {\r\n                        if (this.props.scrollHorizontal) {\r\n                            let offsetX = -gestureState.dx;\r\n                            if (offsetX > this.props.scrollOffsetMax) {\r\n                                offsetX -= (offsetX - this.props.scrollOffsetMax) / 2;\r\n                            }\r\n\r\n                            this.props.scrollTo({ x: offsetX, animated: false });\r\n                        } else {\r\n                            let offsetY = -gestureState.dy;\r\n                            if (offsetY > this.props.scrollOffsetMax) {\r\n                                offsetY -= (offsetY - this.props.scrollOffsetMax) / 2;\r\n                            }\r\n\r\n                            this.props.scrollTo({ y: offsetY, animated: false });\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            onPanResponderRelease: (evt, gestureState) => {\r\n                // Call the onSwipe prop if the threshold has been exceeded on the right direction\r\n                const accDistance = this.getAccDistancePerDirection(gestureState);\r\n                if (\r\n                    accDistance > this.props.swipeThreshold &&\r\n                    this.isSwipeDirectionAllowed(gestureState)\r\n                ) {\r\n                    if (this.props.onSwipeComplete) {\r\n                        this.inSwipeClosingState = true;\r\n                        this.props.onSwipeComplete({\r\n                            swipingDirection: this.getSwipingDirection(gestureState),\r\n                        });\r\n                        return;\r\n                    }\r\n                    // Deprecated. Remove later.\r\n                    if ((this.props as any).onSwipe) {\r\n                        this.inSwipeClosingState = true;\r\n                        (this.props as any).onSwipe();\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                //Reset backdrop opacity and modal position\r\n                if (this.props.onSwipeCancel) {\r\n                    this.props.onSwipeCancel();\r\n                }\r\n\r\n                if (this.backdropRef) {\r\n                    this.backdropRef.transitionTo({\r\n                        opacity: this.props.backdropOpacity,\r\n                    });\r\n                }\r\n\r\n                // Animated.spring(this.state.pan!, {\r\n                Animated.spring(this.state.pan, {\r\n                    toValue: { x: 0, y: 0 },\r\n                    bounciness: 0,\r\n                    useNativeDriver: false,\r\n                }).start();\r\n\r\n                if (this.props.scrollTo) {\r\n                    // if (this.props.scrollOffset > this.props.scrollOffsetMax!) {\r\n                    if (this.props.scrollOffset > this.props.scrollOffsetMax) {\r\n                        this.props.scrollTo({\r\n                            y: this.props.scrollOffsetMax,\r\n                            animated: true,\r\n                        });\r\n                    }\r\n                }\r\n            },\r\n        });\r\n    };\r\n\r\n    getAccDistancePerDirection = (gestureState: PanResponderGestureState) => {\r\n        switch (this.currentSwipingDirection) {\r\n        case \"up\":\r\n            return -gestureState.dy;\r\n        case \"down\":\r\n            return gestureState.dy;\r\n        case \"right\":\r\n            return gestureState.dx;\r\n        case \"left\":\r\n            return -gestureState.dx;\r\n        default:\r\n            return 0;\r\n        }\r\n    };\r\n\r\n    getSwipingDirection = (gestureState: PanResponderGestureState) => {\r\n        if (Math.abs(gestureState.dx) > Math.abs(gestureState.dy)) {\r\n            return gestureState.dx > 0 ? \"right\" : \"left\";\r\n        }\r\n\r\n        return gestureState.dy > 0 ? \"down\" : \"up\";\r\n    };\r\n\r\n    calcDistancePercentage = (gestureState: PanResponderGestureState) => {\r\n        switch (this.currentSwipingDirection) {\r\n        case \"down\":\r\n            return (\r\n                (gestureState.moveY - gestureState.y0) /\r\n                    ((this.props.deviceHeight || this.state.deviceHeight) -\r\n                        gestureState.y0)\r\n            );\r\n        case \"up\":\r\n            return reversePercentage(gestureState.moveY / gestureState.y0);\r\n        case \"left\":\r\n            return reversePercentage(gestureState.moveX / gestureState.x0);\r\n        case \"right\":\r\n            return (\r\n                (gestureState.moveX - gestureState.x0) /\r\n                    ((this.props.deviceWidth || this.state.deviceWidth) - gestureState.x0)\r\n            );\r\n\r\n        default:\r\n            return 0;\r\n        }\r\n    };\r\n\r\n    createAnimationEventForSwipe = () => {\r\n        if (\r\n            this.currentSwipingDirection === \"right\" ||\r\n            this.currentSwipingDirection === \"left\"\r\n        ) {\r\n            return Animated.event([null, { dx: this.state.pan?.x }], {\r\n                useNativeDriver: false,\r\n            });\r\n        } else {\r\n            return Animated.event([null, { dy: this.state.pan?.y }], {\r\n                useNativeDriver: false,\r\n            });\r\n        }\r\n    };\r\n\r\n    isDirectionIncluded = (direction: Direction) => {\r\n        return Array.isArray(this.props.swipeDirection)\r\n            ? this.props.swipeDirection.includes(direction)\r\n            : this.props.swipeDirection === direction;\r\n    };\r\n\r\n    isSwipeDirectionAllowed = ({ dy, dx }: PanResponderGestureState) => {\r\n        const draggedDown = dy > 0;\r\n        const draggedUp = dy < 0;\r\n        const draggedLeft = dx < 0;\r\n        const draggedRight = dx > 0;\r\n\r\n        if (\r\n            this.currentSwipingDirection === \"up\" &&\r\n            this.isDirectionIncluded(\"up\") &&\r\n            draggedUp\r\n        ) {\r\n            return true;\r\n        } else if (\r\n            this.currentSwipingDirection === \"down\" &&\r\n            this.isDirectionIncluded(\"down\") &&\r\n            draggedDown\r\n        ) {\r\n            return true;\r\n        } else if (\r\n            this.currentSwipingDirection === \"right\" &&\r\n            this.isDirectionIncluded(\"right\") &&\r\n            draggedRight\r\n        ) {\r\n            return true;\r\n        } else if (\r\n            this.currentSwipingDirection === \"left\" &&\r\n            this.isDirectionIncluded(\"left\") &&\r\n            draggedLeft\r\n        ) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    handleDimensionsUpdate = () => {\r\n        if (!this.props.deviceHeight && !this.props.deviceWidth) {\r\n            // Here we update the device dimensions in the state if the layout changed\r\n            // (triggering a render)\r\n            const deviceWidth = Dimensions.get(\"screen\").width;\r\n            const deviceHeight = Dimensions.get(\"screen\").height;\r\n            if (\r\n                deviceWidth !== this.state.deviceWidth ||\r\n                deviceHeight !== this.state.deviceHeight\r\n            ) {\r\n                this.setState({ deviceWidth, deviceHeight });\r\n            }\r\n        }\r\n    };\r\n\r\n    open = () => {\r\n        if (this.isTransitioning) {\r\n            return;\r\n        }\r\n        this.isTransitioning = true;\r\n        if (this.backdropRef) {\r\n            this.backdropRef.transitionTo(\r\n                { opacity: this.props.backdropOpacity },\r\n                this.props.backdropTransitionInTiming,\r\n            );\r\n        }\r\n\r\n        // This is for resetting the pan position,otherwise the modal gets stuck\r\n        // at the last released position when you try to open it.\r\n        // TODO: Could certainly be improved - no idea for the moment.\r\n        if (this.state.isSwipeable) {\r\n            this.state.pan?.setValue({ x: 0, y: 0 });\r\n        }\r\n\r\n        if (this.contentRef) {\r\n            this.props.onModalWillShow && this.props.onModalWillShow();\r\n            const interactionHandle = InteractionManager.createInteractionHandle();\r\n            this.contentRef\r\n                .animate(this.animationIn, this.props.animationInTiming)\r\n                .then(() => {\r\n                    this.isTransitioning = false;\r\n                    InteractionManager.clearInteractionHandle(interactionHandle);\r\n                    if (!this.props.isVisible) {\r\n                        this.close();\r\n                    } else {\r\n                        this.props.onModalShow();\r\n                    }\r\n                });\r\n        }\r\n    };\r\n\r\n    close = () => {\r\n        if (this.isTransitioning) {\r\n            return;\r\n        }\r\n        this.isTransitioning = true;\r\n        if (this.backdropRef) {\r\n            this.backdropRef.transitionTo(\r\n                { opacity: 0 },\r\n                this.props.backdropTransitionOutTiming,\r\n            );\r\n        }\r\n\r\n        let animationOut = this.animationOut;\r\n\r\n        if (this.inSwipeClosingState) {\r\n            this.inSwipeClosingState = false;\r\n            if (this.currentSwipingDirection === \"up\") {\r\n                animationOut = \"slideOutUp\";\r\n            } else if (this.currentSwipingDirection === \"down\") {\r\n                animationOut = \"slideOutDown\";\r\n            } else if (this.currentSwipingDirection === \"right\") {\r\n                animationOut = \"slideOutRight\";\r\n            } else if (this.currentSwipingDirection === \"left\") {\r\n                animationOut = \"slideOutLeft\";\r\n            }\r\n        }\r\n\r\n        if (this.contentRef) {\r\n            this.props.onModalWillHide && this.props.onModalWillHide();\r\n            const interactionHandle = InteractionManager.createInteractionHandle();\r\n            this.contentRef\r\n                .animate(animationOut, this.props.animationOutTiming)\r\n                .then(() => {\r\n                    this.isTransitioning = false;\r\n                    InteractionManager.clearInteractionHandle(interactionHandle);\r\n                    if (this.props.isVisible) {\r\n                        this.open();\r\n                    } else {\r\n                        this.setState(\r\n                            {\r\n                                showContent: false,\r\n                            },\r\n                            () => {\r\n                                this.setState(\r\n                                    {\r\n                                        isVisible: false,\r\n                                    },\r\n                                    () => {\r\n                                        this.props.onModalHide();\r\n                                    },\r\n                                );\r\n                            },\r\n                        );\r\n                    }\r\n                });\r\n        }\r\n    };\r\n    makeBackdrop = () => {\r\n        if (!this.props.hasBackdrop) {\r\n            return null;\r\n        }\r\n        if (\r\n            this.props.customBackdrop &&\r\n            !React.isValidElement(this.props.customBackdrop)\r\n        ) {\r\n            console.warn(\r\n                \"Invalid customBackdrop element passed to Modal. You must provide a valid React element.\",\r\n            );\r\n        }\r\n        const {\r\n            customBackdrop,\r\n            backdropColor,\r\n            useNativeDriver,\r\n            useNativeDriverForBackdrop,\r\n            onBackdropPress,\r\n        } = this.props;\r\n        const hasCustomBackdrop = !!this.props.customBackdrop;\r\n\r\n        const backdropComputedStyle = [\r\n            {\r\n                width: this.getDeviceWidth(),\r\n                height: this.getDeviceHeight(),\r\n                backgroundColor:\r\n                    this.state.showContent && !hasCustomBackdrop\r\n                        ? backdropColor\r\n                        : \"transparent\",\r\n            },\r\n        ];\r\n\r\n        const backdropWrapper = (\r\n            <animatable.View\r\n                ref={ref => (this.backdropRef = ref)}\r\n                useNativeDriver={\r\n                    useNativeDriverForBackdrop !== undefined\r\n                        ? useNativeDriverForBackdrop\r\n                        : useNativeDriver\r\n                }\r\n                style={[styles.backdrop, backdropComputedStyle]}>\r\n                {hasCustomBackdrop && customBackdrop}\r\n            </animatable.View>\r\n        );\r\n\r\n        if (hasCustomBackdrop) {\r\n            // The user will handle backdrop presses himself\r\n            return backdropWrapper;\r\n        }\r\n        // If there's no custom backdrop, handle presses with\r\n        // TouchableWithoutFeedback\r\n        return (\r\n            <TouchableWithoutFeedback onPress={onBackdropPress}>\r\n                {backdropWrapper}\r\n            </TouchableWithoutFeedback>\r\n        );\r\n    };\r\n    render() {\r\n        /* eslint-disable @typescript-eslint/no-unused-vars */\r\n        const {\r\n            animationIn,\r\n            animationInTiming,\r\n            animationOut,\r\n            animationOutTiming,\r\n            avoidKeyboard,\r\n            coverScreen,\r\n            hasBackdrop,\r\n            backdropColor,\r\n            backdropOpacity,\r\n            backdropTransitionInTiming,\r\n            backdropTransitionOutTiming,\r\n            customBackdrop,\r\n            children,\r\n            isVisible,\r\n            onModalShow,\r\n            onBackButtonPress,\r\n            useNativeDriver,\r\n            propagateSwipe,\r\n            style,\r\n            ...otherProps\r\n        } = this.props;\r\n\r\n        const { testID, ...containerProps } = otherProps;\r\n        const computedStyle = [\r\n            { margin: this.getDeviceWidth() * 0.05, transform: [{ translateY: 0 }] },\r\n            styles.content,\r\n            style,\r\n        ];\r\n\r\n        let panHandlers = {};\r\n        let panPosition = {};\r\n        if (this.state.isSwipeable) {\r\n            panHandlers = { ...this.panResponder?.panHandlers };\r\n\r\n            if (useNativeDriver) {\r\n                panPosition = {\r\n                    transform: this.state.pan?.getTranslateTransform(),\r\n                };\r\n            } else {\r\n                panPosition = this.state.pan?.getLayout();\r\n            }\r\n        }\r\n\r\n        // The user might decide not to show the modal while it is animating\r\n        // to enhance performance.\r\n        const _children =\r\n            this.props.hideModalContentWhileAnimating &&\r\n                this.props.useNativeDriver &&\r\n                !this.state.showContent ? (\r\n                    <animatable.View />\r\n                ) : (\r\n                    children\r\n                );\r\n        const containerView = (\r\n            <animatable.View\r\n                {...panHandlers}\r\n                ref={ref => (this.contentRef = ref)}\r\n                style={[panPosition, computedStyle]}\r\n                pointerEvents=\"box-none\"\r\n                useNativeDriver={useNativeDriver}\r\n                {...containerProps}>\r\n                {_children}\r\n            </animatable.View>\r\n        );\r\n\r\n        // If coverScreen is set to false by the user\r\n        // we render the modal inside the parent view directly\r\n        if (!coverScreen && this.state.isVisible) {\r\n            return (\r\n                <View\r\n                    pointerEvents=\"box-none\"\r\n                    style={[styles.backdrop, styles.containerBox]}>\r\n                    {this.makeBackdrop()}\r\n                    {containerView}\r\n                </View>\r\n            );\r\n        }\r\n        return (\r\n            <Modal\r\n                transparent={true}\r\n                animationType={\"none\"}\r\n                visible={this.state.isVisible}\r\n                onRequestClose={onBackButtonPress}\r\n                {...otherProps}>\r\n                {this.makeBackdrop()}\r\n\r\n                {avoidKeyboard ? (\r\n                    <KeyboardAvoidingView\r\n                        behavior={Platform.OS === \"ios\" ? \"padding\" : undefined}\r\n                        pointerEvents=\"box-none\"\r\n                        style={computedStyle.concat([{ margin: 0 }])}>\r\n                        {containerView}\r\n                    </KeyboardAvoidingView>\r\n                ) : (\r\n                    containerView\r\n                )}\r\n            </Modal>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ReactNativeModal;\r\n"]}