{"version":3,"sources":["TouchableRipple.native.tsx"],"names":["React","Platform","TouchableHighlight","TouchableNativeFeedback","View","color","ThemeContext","ANDROID_VERSION_LOLLIPOP","ANDROID_VERSION_PIE","TouchableRipple","style","background","borderless","disabled","disabledProp","rippleColor","underlayColor","children","rest","theme","useContext","dark","colors","onPress","calculatedRippleColor","text","alpha","rgb","string","useForeground","OS","Version","supported","Ripple","overflow","Children","only","fade"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAGIC,QAHJ,EAIIC,kBAJJ,EAKIC,uBALJ,EAOIC,IAPJ,QASO,cATP;AAUA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAuBC,YAAvB,QAA2C,mBAA3C;AAEA,MAAMC,wBAAwB,GAAG,EAAjC;AACA,MAAMC,mBAAmB,GAAG,EAA5B;;AAcA,MAAMC,eAAe,GAAG,CAAC;AACrBC,EAAAA,KADqB;AAErBC,EAAAA,UAFqB;AAGrBC,EAAAA,UAAU,GAAG,KAHQ;AAIrBC,EAAAA,QAAQ,EAAEC,YAJW;AAKrBC,EAAAA,WALqB;AAMrBC,EAAAA,aANqB;AAOrBC,EAAAA,QAPqB;AAQrB,KAAGC;AARkB,CAAD,KASX;AACT,QAAMC,KAAK,GAAGnB,KAAK,CAACoB,UAAN,CAAiBd,YAAjB,CAAd;AACA,QAAM;AAAEe,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAmBH,KAAzB;AACA,QAAMN,QAAQ,GAAGC,YAAY,IAAI,CAACI,IAAI,CAACK,OAAvC;AACA,QAAMC,qBAAqB,GACvBT,WAAW,IACXV,KAAK,CAACiB,MAAM,CAACG,IAAR,CAAL,CACKC,KADL,CACWL,IAAI,GAAG,IAAH,GAAU,GADzB,EAEKM,GAFL,GAGKC,MAHL,EAFJ,CAJS,CAWT;AACA;;AACA,QAAMC,aAAa,GACf5B,QAAQ,CAAC6B,EAAT,KAAgB,SAAhB,IACA7B,QAAQ,CAAC8B,OAAT,IAAoBvB,mBADpB,IAEAI,UAHJ;;AAKA,MAAIH,eAAe,CAACuB,SAApB,EAA+B;AAC3B,wBACI,oBAAC,uBAAD,eACQd,IADR;AAEI,MAAA,QAAQ,EAAEL,QAFd;AAGI,MAAA,aAAa,EAAEgB,aAHnB;AAII,MAAA,UAAU,EACNlB,UAAU,IAAI,IAAd,GACMA,UADN,GAEMR,uBAAuB,CAAC8B,MAAxB,CAA+BT,qBAA/B,EAAsDZ,UAAtD;AAPd,qBAUI,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE,CAACA,UAAU,IAAI;AAAEsB,QAAAA,QAAQ,EAAE;AAAZ,OAAf,EAAuCxB,KAAvC;AAAb,OACKV,KAAK,CAACmC,QAAN,CAAeC,IAAf,CAAoBnB,QAApB,CADL,CAVJ,CADJ;AAgBH;;AAED,sBACI,oBAAC,kBAAD,eACQC,IADR;AAEI,IAAA,QAAQ,EAAEL,QAFd;AAGI,IAAA,KAAK,EAAE,CAACD,UAAU,IAAI;AAAEsB,MAAAA,QAAQ,EAAE;AAAZ,KAAf,EAAuCxB,KAAvC,CAHX;AAII,IAAA,aAAa,EACTM,aAAa,IAAI,IAAjB,GACMA,aADN,GAEMX,KAAK,CAACmB,qBAAD,CAAL,CAA6Ba,IAA7B,CAAkC,GAAlC,EAAuCV,GAAvC,GAA6CC,MAA7C;AAPd,MAUK5B,KAAK,CAACmC,QAAN,CAAeC,IAAf,CAAoBnB,QAApB,CAVL,CADJ;AAcH,CA5DD;;AA8DAR,eAAe,CAACuB,SAAhB,GACI/B,QAAQ,CAAC6B,EAAT,KAAgB,SAAhB,IAA6B7B,QAAQ,CAAC8B,OAAT,IAAoBxB,wBADrD;AAGA,eAAeE,eAAf","sourcesContent":["import * as React from \"react\";\r\nimport {\r\n    BackgroundPropType,\r\n    StyleProp,\r\n    Platform,\r\n    TouchableHighlight,\r\n    TouchableNativeFeedback,\r\n    TouchableWithoutFeedback,\r\n    View,\r\n    ViewStyle,\r\n} from \"react-native\";\r\nimport color from \"color\";\r\nimport { DefaultTheme, ThemeContext } from \"styled-components\";\r\n\r\nconst ANDROID_VERSION_LOLLIPOP = 21;\r\nconst ANDROID_VERSION_PIE = 28;\r\n\r\ntype Props = React.ComponentProps<typeof TouchableWithoutFeedback> & {\r\n    borderless?: boolean;\r\n    background?: BackgroundPropType;\r\n    disabled?: boolean;\r\n    onPress?: () => void | null;\r\n    rippleColor?: string;\r\n    underlayColor?: string;\r\n    children: React.ReactNode;\r\n    style?: StyleProp<ViewStyle>;\r\n    theme: DefaultTheme;\r\n};\r\n\r\nconst TouchableRipple = ({\r\n    style,\r\n    background,\r\n    borderless = false,\r\n    disabled: disabledProp,\r\n    rippleColor,\r\n    underlayColor,\r\n    children,\r\n    ...rest\r\n}: Props) => {\r\n    const theme = React.useContext(ThemeContext);\r\n    const { dark, colors } = theme;\r\n    const disabled = disabledProp || !rest.onPress;\r\n    const calculatedRippleColor =\r\n        rippleColor ||\r\n        color(colors.text)\r\n            .alpha(dark ? 0.32 : 0.2)\r\n            .rgb()\r\n            .string();\r\n\r\n    // A workaround for ripple on Android P is to use useForeground + overflow: 'hidden'\r\n    // https://github.com/facebook/react-native/issues/6480\r\n    const useForeground =\r\n        Platform.OS === \"android\" &&\r\n        Platform.Version >= ANDROID_VERSION_PIE &&\r\n        borderless;\r\n\r\n    if (TouchableRipple.supported) {\r\n        return (\r\n            <TouchableNativeFeedback\r\n                {...rest}\r\n                disabled={disabled}\r\n                useForeground={useForeground}\r\n                background={\r\n                    background != null\r\n                        ? background\r\n                        : TouchableNativeFeedback.Ripple(calculatedRippleColor, borderless)\r\n                }\r\n            >\r\n                <View style={[borderless && { overflow: \"hidden\" }, style]}>\r\n                    {React.Children.only(children)}\r\n                </View>\r\n            </TouchableNativeFeedback>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <TouchableHighlight\r\n            {...rest}\r\n            disabled={disabled}\r\n            style={[borderless && { overflow: \"hidden\" }, style]}\r\n            underlayColor={\r\n                underlayColor != null\r\n                    ? underlayColor\r\n                    : color(calculatedRippleColor).fade(0.5).rgb().string()\r\n            }\r\n        >\r\n            {React.Children.only(children)}\r\n        </TouchableHighlight>\r\n    );\r\n};\r\n\r\nTouchableRipple.supported =\r\n    Platform.OS === \"android\" && Platform.Version >= ANDROID_VERSION_LOLLIPOP;\r\n\r\nexport default TouchableRipple;\r\n"]}