{"version":3,"sources":["CrossFadeIcon.tsx"],"names":["React","Animated","ThemeContext","styled","Icon","isValidIcon","isEqualIcon","CrossFadeIconWrapperView","View","alignItems","justifyContent","CrossFadeIcon","color","size","icon","theme","useContext","currentIcon","setCurrentIcon","useState","previousIcon","setPreviousIcon","current","fade","useRef","Value","scale","animation","useEffect","setValue","timing","duration","toValue","useNativeDriver","start","opacityPrev","opacityNext","interpolate","inputRange","outputRange","rotatePrev","rotateNext","width","height","position","top","left","right","bottom","opacity","transform","rotate"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { Animated } from \"react-native\";\nimport { DefaultTheme, ThemeContext } from \"styled-components\";\nimport styled from \"styled-components/native\";\nimport Icon, { isValidIcon, isEqualIcon } from \"./SvgIcon\";\n\nconst CrossFadeIconWrapperView = styled.View({\n    alignItems: \"center\",\n    justifyContent: \"center\",\n});\n\ntype Props = {\n    /**\n     * Icon to display for the `CrossFadeIcon`.\n     */\n    icon: React.ReactElement;\n    /**\n     * Color of the icon.\n     */\n    color: string;\n    /**\n     * Size of the icon.\n     */\n    size: number;\n    /**\n     * @optional\n     */\n    theme?: DefaultTheme;\n};\n\nconst CrossFadeIcon = ({ color, size, icon }: Props) => {\n    const theme = React.useContext(ThemeContext);\n    const [currentIcon, setCurrentIcon] = React.useState<React.ReactElement>(\n        () => icon\n    );\n    const [previousIcon, setPreviousIcon] = React.useState<React.ReactElement | null>(\n        null\n    );\n    const { current: fade } = React.useRef<Animated.Value>(new Animated.Value(1));\n\n    const { scale } = theme.animation;\n\n    if (currentIcon !== icon) {\n        setPreviousIcon(() => currentIcon);\n        setCurrentIcon(() => icon);\n    }\n\n    React.useEffect(() => {\n        if (isValidIcon(previousIcon) && !isEqualIcon(previousIcon, currentIcon)) {\n            fade.setValue(1);\n\n            Animated.timing(fade, {\n                duration: scale * 200,\n                toValue: 0,\n                useNativeDriver: true,\n            }).start();\n        }\n    }, [currentIcon, previousIcon, fade, scale]);\n\n    const opacityPrev = fade;\n    const opacityNext = previousIcon\n        ? fade.interpolate({\n            inputRange: [0, 1],\n            outputRange: [1, 0],\n        })\n        : 1;\n\n    const rotatePrev = fade.interpolate({\n        inputRange: [0, 1],\n        outputRange: [\"-90deg\", \"0deg\"],\n    });\n\n    const rotateNext = previousIcon\n        ? fade.interpolate({\n            inputRange: [0, 1],\n            outputRange: [\"0deg\", \"-180deg\"],\n        })\n        : \"0deg\";\n\n    return (\n        <CrossFadeIconWrapperView\n            style={{\n                width: size,\n                height: size,\n            }}\n            testID=\"icon_fade_view\"\n        >\n            {previousIcon ? (\n                <Animated.View\n                    style={[\n                        {\n                            position: \"absolute\",\n                            top: 0,\n                            left: 0,\n                            right: 0,\n                            bottom: 0,\n                        },\n                        {\n                            opacity: opacityPrev,\n                            transform: [{ rotate: rotatePrev }],\n                        },\n                    ]}\n                    testID=\"icon_fade_animated_view\"\n                >\n                    <Icon icon={previousIcon} size={size} color={color} />\n                </Animated.View>\n            ) : null}\n            <Animated.View\n                style={[\n                    {\n                        position: \"absolute\",\n                        top: 0,\n                        left: 0,\n                        right: 0,\n                        bottom: 0,\n                    },\n                    {\n                        opacity: opacityNext,\n                        transform: [{ rotate: rotateNext }],\n                    },\n                ]}\n                testID=\"icon_fade_animated_view\"\n            >\n                <Icon icon={currentIcon} size={size} color={color} />\n            </Animated.View>\n        </CrossFadeIconWrapperView>\n    );\n};\n\nexport default CrossFadeIcon;\n"]}